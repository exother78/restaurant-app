(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{111:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price*t.quantity+e}),0)}},123:function(e,t,r){"use strict";var n=r(2),a=r(1),o=(r(124),r(111)),c=r(24),i=r.n(c),s=r(13),l=r(3),d=r(4),u=r(0);t.a=function(){var e=Object(l.g)(),t=Object(s.b)(),r=Object(n.a)(t.basket,2),c=r[0],p=r[1],b=Object(a.useState)(null),v=Object(n.a)(b,2),j=v[0],h=v[1],O=Object(s.b)().userAPI,m=Object(n.a)(O.postalData,1)[0],f=Object(n.a)(O.deliveryOption,1)[0];return j&&setTimeout((function(){h(null)}),2e3),Object(u.jsx)("div",{className:"order__right-section",children:Object(u.jsxs)("div",{className:"order__right-section-content",children:[Object(u.jsxs)("h2",{className:"orderTotal__title",children:[null===c||void 0===c?void 0:c.length," items in Cart",Object(u.jsx)(i.a,{style:{color:"#d70f64",fontSize:"xx-large"}})]}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(u.jsxs)("div",{className:"order__total-list",children:[Object(u.jsx)("p",{className:"order__total-title",children:null===e||void 0===e?void 0:e.title}),Object(u.jsxs)("p",{className:"order__total-price",children:[Object(u.jsxs)("span",{className:"order__total-list-text",children:["x",null===e||void 0===e?void 0:e.quantity]}),null===e||void 0===e?void 0:e.price," \u20ac"]})]},t)})),Object(u.jsxs)("div",{className:"order__total-list",style:{display:"takeaway"===f?"none":"flex"},children:[Object(u.jsx)("p",{className:"order__total-title"}),Object(u.jsxs)("p",{className:"order__total-price",style:{fontSize:"large",fontWeight:"bold"},children:[Object(u.jsx)("span",{className:"order__total-list-text",style:{fontSize:"small",fontWeight:"bold"},children:"delivery fee"}),null===m||void 0===m?void 0:m.deliveryPrice]})]}),Object(u.jsxs)("h3",{className:"order__total",children:[Object(u.jsx)("span",{children:" Total "}),parseFloat(Object(o.a)(c)).toFixed(2)," \u20ac"]}),"takeaway"===f?null:(null===m||void 0===m?void 0:m.deliveryPrice)?Object(u.jsxs)("h4",{className:"order__total-fee-text",children:["with delivery fee"," ",Object(u.jsx)("span",{children:(parseFloat(Object(o.a)(c))+parseFloat(null===m||void 0===m?void 0:m.deliveryPrice)).toFixed(2)})]}):Object(u.jsx)("h4",{children:"Enter Postal Info"}),Object(u.jsxs)("div",{className:"order__total-btns",children:[Object(u.jsx)("button",{className:"order__total-empty-button",onClick:function(){p([])},children:"Empty Cart"}),Object(u.jsx)(d.b,{to:c.length>0?"/checkout":"/order",className:"order__total-checkout-button-link",children:Object(u.jsx)("button",{className:"order__total-checkout-button",onClick:function(){c.length>0&&e("/checkout")},children:"Checkout"})})]})]})})}},124:function(e,t,r){},203:function(e,t,r){},339:function(e,t,r){"use strict";r.r(t);var n=r(7),a=r.n(n),o=r(8),c=r(2),i=r(1),s=(r(203),r(204)),l=r(0),d=function(e){var t=e.onSuccess,r=e.onCancel,n=e.onError,a=e.total,o=e.loading;e.setError;return Object(l.jsx)(s.c,{deferLoading:o,options:{"client-id":"ATSNzle97H2HdLUL3GMnS5I8PuKouWyteOOCVNR-3UqTW5N_0tFs3ddtDitE1IfqAlRXI4hbaEo2yDT9","merchant-id":"92V8XPRZFHZRE",locale:"it_IT",intent:"capture",currency:"EUR"},children:Object(l.jsx)(s.b,{fundingSource:s.a.PAYPAL,onApprove:t,onError:n,onCancel:r,createOrder:function(e,t){if(console.log("data: ",e),0!==a)return t.order.create({purchase_units:[{amount:{value:a}}]})},style:{layout:"horizontal",label:"checkout",height:40}})})},u=r(9),p=r.n(u),b=r(3),v=r(123),j=r(13),h=r(111),O=r(19);t.default=function(){var e=Object(b.g)(),t=Object(j.b)(),r=Object(j.b)(),n=r.userAPI,s=r.token,u=n.email,m=n.lastName,f=n.name,y=n.phone,x=n.userID,k=null===t||void 0===t?void 0:t.basket,_=Object(c.a)(k,2),g=_[0],N=_[1],w=null===n||void 0===n?void 0:n.postalCode,C=Object(c.a)(w,1)[0],D=null===n||void 0===n?void 0:n.address,I=Object(c.a)(D,1)[0],P=null===n||void 0===n?void 0:n.building,F=Object(c.a)(P,1)[0],S=null===n||void 0===n?void 0:n.checkPhone,E=Object(c.a)(S,1)[0],A=null===n||void 0===n?void 0:n.checkEmail,T=Object(c.a)(A,1)[0],z=null===n||void 0===n?void 0:n.checkName,R=Object(c.a)(z,1)[0],q=Object(c.a)(n.postalData,1)[0],B=Object(c.a)(n.paymentOption,1)[0],L=Object(c.a)(n.deliveryOption,1)[0],W=Object(i.useState)(""),H=Object(c.a)(W,2),U=H[0],J=H[1],V=Object(i.useState)(!0),X=Object(c.a)(V,2),Z=X[0],G=X[1],K=Object(i.useState)(null),M=Object(c.a)(K,2),Y=M[0],Q=M[1];console.log("delivery option: ",L),console.log("payment option: ",B),Object(i.useEffect)((function(){Q(parseFloat(Object(h.a)(g))+parseFloat(null===q||void 0===q?void 0:q.deliveryPrice))}),[g,null===q||void 0===q?void 0:q.deliveryPrice]);var $=function(){var t=Object(o.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("payment data: ",r),n=Date.now()+1983,t.prev=2,t.next=5,p.a.post("/api/user/createorder",{orders:{orderNumber:n,userID:x,postalCode:C,address:I,paymentID:r.orderID,building:F,basket:g,name:f||R,email:u||T,lastName:m,phone:y||E,time:n,total:Object(h.a)(g),deliveryCharges:null===q||void 0===q?void 0:q.deliveryPrice,deliveryOption:L,paymentOption:B,paymentStatus:"received"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){N([]),e("/checkout/ordersuccess/".concat(n))}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),J(t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),ee=function(){var t=Object(o.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("payment data: ",r),n=Date.now()+1983,t.prev=2,t.next=5,p.a.post("/api/user/createorder",{orders:{orderNumber:n,userID:x,paymentID:r.orderID,basket:g,name:f||R,email:u||T,lastName:m,phone:y||E,time:n,total:Object(h.a)(g),deliveryOption:L,paymentOption:B,paymentStatus:"received"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){N([]),e("/checkout/ordersuccess/".concat(n))}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),J(t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),te=function(){var t=Object(o.a)(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now()+1983,t.prev=1,t.next=4,p.a.post("/api/user/createorder",{orders:{orderNumber:r,userID:x,postalCode:C,address:I,building:F,basket:g,name:f||R,email:u||T,lastName:m,phone:y||E,time:r,total:Object(h.a)(g),deliveryCharges:null===q||void 0===q?void 0:q.deliveryPrice,deliveryOption:L,paymentOption:B,paymentStatus:"pending"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){N([]),e("/checkout/ordersuccess/".concat(r))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),J(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),re=function(){var t=Object(o.a)(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now()+1983,t.prev=1,t.next=4,p.a.post("/api/user/createorder",{orders:{orderNumber:r,userID:x,basket:g,name:f||R,email:u||T,lastName:m,phone:y||E,time:r,total:Object(h.a)(g),deliveryOption:L,paymentOption:B,paymentStatus:"pending"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){N([]),e("/checkout/ordersuccess/".concat(r))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),J(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),ne=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J("Transaction not successful");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J("Cancelled Transaction");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t;C&&I&&F&&R&&T&&E&&!((null===(e=parseFloat(Object(h.a)(g)))||void 0===e?void 0:e.toFixed(2))<parseFloat("takeaway"===L?"10":null===q||void 0===q?void 0:q.minOrder))&&0!==g.length||G(!0),C&&I&&F&&R&&T&&E&&(null===(t=parseFloat(Object(h.a)(g)))||void 0===t?void 0:t.toFixed(2))>=parseInt("takeaway"===L?"10":null===q||void 0===q?void 0:q.minOrder)&&g.length>0&&G(!1),0===(null===g||void 0===g?void 0:g.length)&&J("No items in the cart")}),[F,C,g,I,Z,R,T,E,null===q||void 0===q?void 0:q.minOrder,L]),U&&setTimeout((function(){J(null)}),2e3),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"paymentOptions",children:[U&&Object(l.jsx)("div",{className:"error__box",children:U}),Object(l.jsx)(v.a,{}),Object(l.jsx)("div",{className:"paymentOptions-Paypal-btn",children:"paypaldelivery"===B?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("button",{onClick:function(e){return $({orderID:"something now"},e)},style:{padding:"10px 15px",margin:"10px"},children:"Pay the bill"}),Object(l.jsx)(d,{total:"takeaway"===L?Object(h.a)(g):Y,onSuccess:"homedelivery"===L?$:ee,onCancel:ae,onError:ne,setError:J,loading:Z})]}):"cashondelivery"===B&&Object(l.jsx)("button",{className:"paymentOptions-confirmOrder-btn",onClick:"homedelivery"===L?te:re,children:"Confirm Order"})})]}),Object(l.jsx)(O.a,{})]})}}}]);
//# sourceMappingURL=11.f3c9a4ae.chunk.js.map
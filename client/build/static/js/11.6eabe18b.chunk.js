(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{110:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price*t.quantity+e}),0)}},122:function(e,t,n){"use strict";var c=n(2),r=n(1),a=(n(123),n(110)),o=n(23),i=n.n(o),s=n(13),l=n(3),u=n(4),d=n(0);t.a=function(){var e=Object(l.g)(),t=Object(s.b)(),n=Object(c.a)(t.basket,2),o=n[0],b=n[1],j=Object(r.useState)(null),h=Object(c.a)(j,2),p=h[0],v=h[1];return p&&setTimeout((function(){v(null)}),2e3),Object(d.jsxs)("div",{className:"order__right-section",children:[Object(d.jsxs)("div",{className:"order__right-section-content",children:[Object(d.jsxs)("h2",{className:"orderTotal__title",children:[null===o||void 0===o?void 0:o.length," items in Cart",Object(d.jsx)(i.a,{style:{color:"#d70f64",fontSize:"xx-large"}})]}),null===o||void 0===o?void 0:o.map((function(e,t){return Object(d.jsxs)("div",{className:"order__total-list",children:[Object(d.jsx)("p",{className:"order__total-title",children:null===e||void 0===e?void 0:e.title}),Object(d.jsxs)("p",{className:"order__total-price",children:[Object(d.jsxs)("span",{className:"order__total-list-text",children:["x",null===e||void 0===e?void 0:e.quantity]}),null===e||void 0===e?void 0:e.price]})]},t)})),Object(d.jsxs)("h3",{className:"order__total",children:[Object(d.jsx)("span",{children:" total "}),parseFloat(Object(a.a)(o)).toFixed(2)]})]}),Object(d.jsxs)("div",{className:"order__total-btns",children:[Object(d.jsx)("button",{className:"order__total-empty-button",onClick:function(){b([])},children:"Empty Cart"}),Object(d.jsx)(u.b,{to:o.length>0?"/checkout":"/order",className:"order__total-checkout-button-link",children:Object(d.jsx)("button",{className:"order__total-checkout-button",onClick:function(){o.length>0&&e("/checkout")},children:"Checkout"})})]})]})}},123:function(e,t,n){},201:function(e,t,n){},333:function(e,t,n){"use strict";n.r(t);var c=n(7),r=n.n(c),a=n(8),o=n(2),i=n(1),s=(n(201),n(122)),l=n(13),u=n(110),d=n(202),b=n(0),j=function(e){var t=e.onSuccess,n=e.onCancel,c=e.onError,r=e.total,a=e.loading;e.setError;return Object(b.jsx)(d.c,{deferLoading:a,options:{"client-id":"ATSNzle97H2HdLUL3GMnS5I8PuKouWyteOOCVNR-3UqTW5N_0tFs3ddtDitE1IfqAlRXI4hbaEo2yDT9","merchant-id":"92V8XPRZFHZRE",locale:"it_IT",intent:"capture",currency:"EUR"},children:Object(b.jsx)(d.b,{fundingSource:d.a.PAYPAL,onApprove:t,onError:c,onCancel:n,createOrder:function(e,t){if(console.log("data: ",e),0!==r)return t.order.create({purchase_units:[{amount:{value:r}}]})},style:{layout:"horizontal",label:"checkout",height:40}})})},h=n(10),p=n.n(h),v=n(29);t.default=function(){var e=Object(l.b)(),t=Object(l.b)(),n=t.userAPI,c=t.token,d=n.email,h=n.lastName,O=n.name,f=n.phone,m=n.userID,x=null===e||void 0===e?void 0:e.basket,_=Object(o.a)(x,2),k=_[0],N=_[1],g=null===n||void 0===n?void 0:n.postalCode,y=Object(o.a)(g,1)[0],C=null===n||void 0===n?void 0:n.address,E=Object(o.a)(C,1)[0],w=null===n||void 0===n?void 0:n.building,I=Object(o.a)(w,1)[0],S=null===n||void 0===n?void 0:n.checkPhone,T=Object(o.a)(S,1)[0],D=null===n||void 0===n?void 0:n.checkEmail,A=Object(o.a)(D,1)[0],F=null===n||void 0===n?void 0:n.checkName,P=Object(o.a)(F,1)[0],R=Object(i.useState)(""),q=Object(o.a)(R,2),z=q[0],L=q[1],H=Object(i.useState)(!0),U=Object(o.a)(H,2),J=U[0],V=U[1],W=function(){var e=Object(a.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=Date.now(),!(y&&E&&k.length>0)){e.next=11;break}return e.prev=3,e.next=6,p.a.post("/api/user/createorder",{orders:{orderNumber:a+1983,userID:m,postalCode:y,address:E,paymentID:t.orderID,building:I,basket:k,name:O||P,email:d||A,lastName:h,phone:f||T,time:a,total:Object(u.a)(k)}},{headers:{Authorization:"Bearer ".concat(c[0])}}).then((function(){N([])}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),L(e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L("Transaction not successful");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L("Cancelled Transaction");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y&&E&&I&&0!==k.length||V(!0),y&&E&&I&&k.length>0&&V(!1),0===(null===k||void 0===k?void 0:k.length)&&L("No items in the cart")}),[I,m,y,k,E,J]),z&&setTimeout((function(){L(null)}),2e3),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"paymentOptions",children:[z&&Object(b.jsx)("div",{className:"error__box",children:z}),Object(b.jsx)(s.a,{}),Object(b.jsx)("div",{className:"paymentOptions-Paypal-btn",children:Object(b.jsx)(j,{total:parseFloat(Object(u.a)(k)).toFixed(2),onSuccess:W,onCancel:Z,onError:X,setError:L,loading:J})})]}),Object(b.jsx)(v.a,{})]})}}}]);
//# sourceMappingURL=11.6eabe18b.chunk.js.map
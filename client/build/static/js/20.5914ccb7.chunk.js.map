{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","Components/DevAdmin/Products/CreateProduct.jsx"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","CreateProduct","navigate","useNavigate","useStateValue","categoriesAPI","productsAPI","userAPI","token","isAdmin","categories","callback","setCallback","useState","imageUpload","setImageUpload","imageShow","setImageShow","loading","setLoading","error","setError","product_id","title","description","price","category","images","data","setData","handleFileChange","e","a","getFile","files","alert","formData","FormData","append","reader","FileReader","onloadend","result","readAsDataURL","handleChange","name","value","prevValues","uploadImage","axios","post","headers","res","response","funcWithImg","d","public_id","url","Authorization","funcWithoutImg","productFunc","handleSubmit","preventDefault","then","setTimeout","className","style","margin","onSubmit","type","onChange","src","alt","width","height","objectFit","onClick","required","placeholder","defaultValue","disabled","map","color","letterSpacing"],"mappings":"mGAAA,8CAEA,SAASA,EAAQC,EAAQC,GACvB,IAAIC,EAAOC,OAAOD,KAAKF,GAEvB,GAAIG,OAAOC,sBAAuB,CAChC,IAAIC,EAAUF,OAAOC,sBAAsBJ,GACvCC,IAAgBI,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAEtDP,EAAKQ,KAAKC,MAAMT,EAAMG,GAGxB,OAAOH,EAGM,SAASU,EAAeC,GACrC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAE/CA,EAAI,EACNf,EAAQI,OAAOc,IAAS,GAAMC,SAAQ,SAAUC,GAC9C,YAAeN,EAAQM,EAAKF,EAAOE,OAE5BhB,OAAOiB,0BAChBjB,OAAOkB,iBAAiBR,EAAQV,OAAOiB,0BAA0BH,IAEjElB,EAAQI,OAAOc,IAASC,SAAQ,SAAUC,GACxChB,OAAOmB,eAAeT,EAAQM,EAAKhB,OAAOK,yBAAyBS,EAAQE,OAKjF,OAAON,I,8KCqOMU,UA9PO,WACpB,IAAMC,EAAWC,cACjB,EAAuDC,cAA/CC,EAAR,EAAQA,cAAeC,EAAvB,EAAuBA,YAAaC,EAApC,EAAoCA,QAASC,EAA7C,EAA6CA,MACtCC,EAAP,YAAkBF,EAAQE,QAA1B,MACOC,EAAP,YAAqBL,EAAcK,WAAnC,MACA,cAAgCJ,EAAYK,SAA5C,GAAOA,EAAP,KAAiBC,EAAjB,KAEA,EAAsCC,oBAAS,GAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAAkCF,qBAAlC,mBAAOG,EAAP,KAAkBC,EAAlB,KACA,EAA8BJ,oBAAS,GAAvC,mBAAOK,EAAP,KAAgBC,EAAhB,KACA,EAA0BN,mBAAS,MAAnC,mBAAOO,EAAP,KAAcC,EAAd,KAEA,EAAwBR,mBAAS,CAC/BS,WAAY,GACZC,MAAO,GACPC,YAAa,GACbC,MAAO,GACPC,SAAU,GACVC,OAAQ,KANV,mBAAOC,EAAP,KAAaC,EAAb,KASMC,EAAgB,uCAAG,WAAOC,GAAP,mBAAAC,EAAA,yDACjBC,EAAUF,EAAExC,OAAO2C,MAAM,GADR,yCAEFC,MAAM,uBAFJ,QAInBC,EAAW,IAAIC,UACVC,OAAO,OAAQL,GACxBlB,EAAeqB,IACTG,EAAS,IAAIC,YAEZC,UAAY,WACjBxB,EAAasB,EAAOG,SAGtBH,EAAOI,cAAcV,GAbE,2CAAH,sDAgBhBW,EAAe,SAACb,GACpB,MAAwBA,EAAExC,OAAlBsD,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MAEdjB,GAAQ,SAACkB,GAAD,mBAAC,eACJA,GADG,kBAELF,EAAOC,QASNE,EAAW,uCAAG,4BAAAhB,EAAA,+EAEEiB,IAAMC,KAAK,cAAepC,EAAa,CACvDqC,QAAS,CACP,eAAgB,yBAJJ,cAEVC,EAFU,yBAQTA,GARS,gCAUhB/B,EAAS,KAAMgC,SAASzB,KAAKR,OAVb,yDAAH,qDAcXkC,EAAW,uCAAG,WAAOC,GAAP,eAAAvB,EAAA,+EAEEiB,IAAMC,KACtB,gBADgB,2BAGXtB,GAHW,IAIdD,OAAQ,CAAE6B,UAAWD,EAAE3B,KAAK4B,UAAWC,IAAKF,EAAE3B,KAAK6B,OAErD,CACEN,QAAS,CACPO,cAAc,UAAD,OAAYlD,EAAM,OAVrB,cAEV4C,EAFU,OAchBxC,GAAaD,GACbQ,GAAW,GACXjB,EAAS,uBAhBO,kBAkBTkD,GAlBS,yCAoBhB/B,EAAS,KAAMgC,SAASzB,KAAKR,OAC7BD,GAAW,GArBK,kBAsBT,KAAMkC,SAASzB,MAtBN,0DAAH,sDA0BX+B,EAAc,uCAAG,4BAAA3B,EAAA,+EAEDiB,IAAMC,KACtB,gBADgB,eAGXtB,GAEL,CACEuB,QAAS,CACPO,cAAc,UAAD,OAAYlD,EAAM,OATlB,cAEb4C,EAFa,OAanBxC,GAAaD,GACbQ,GAAW,GACXjB,EAAS,uBAfU,kBAiBZkD,GAjBY,yCAmBnB/B,EAAS,KAAMgC,SAASzB,KAAKR,OAC7BD,GAAW,GApBQ,kBAqBZ,KAAMkC,SAASzB,MArBH,0DAAH,qDAyBdgC,EAAW,uCAAG,WAAOL,GAAP,SAAAvB,EAAA,sDACduB,GACFD,EAAYC,GAETA,GACHI,IALgB,2CAAH,sDASXE,EAAY,uCAAG,WAAO9B,GAAP,SAAAC,EAAA,sDACnBD,EAAE+B,iBACEhD,IACFK,GAAW,GACX6B,IAAce,KAAKH,IAEhB9C,GACH8C,IAPiB,2CAAH,sDAWlB,OAAKnD,GAQDW,GACF4C,YAAW,WACT3C,EAAS,QACR,KAGDH,EACK,cAAC,IAAD,IAIP,sBAAK+C,UAAU,kBAAf,UACG7C,GAAS,qBAAK6C,UAAU,aAAf,SAA6B7C,IACvC,oBAAI8C,MAAO,CAAEC,OAAQ,WAArB,4BAEA,uBAAMC,SAAUP,EAAcI,UAAU,uBAAxC,UACE,sBAAKA,UAAU,wCAAf,WACIjD,GACA,uBACEqD,KAAK,OACLxB,KAAK,OACLyB,SAAUxC,EACVmC,UAAU,4CAGbjD,GACC,sBAAKiD,UAAU,gCAAf,UACE,qBACEM,IAAKvD,EACLwD,IAAI,GACJC,MAAM,OACNC,OAAO,OACPR,MAAO,CAAES,UAAW,WAGtB,qBACEV,UAAU,+BACVW,QAvIM,WAClB3D,EAAa,MACbF,GAAe,IAmIL,qBASN,sBAAKkD,UAAU,yCAAf,UACE,qBAAKA,UAAU,wBAAf,SACE,uBACEY,UAAQ,EACRR,KAAK,OACLS,YAAY,aACZhC,MAAOlB,EAAKN,WACZgD,SAAU1B,EACVC,KAAK,iBAIT,qBAAKoB,UAAU,wBAAf,SACE,uBACEY,UAAQ,EACRR,KAAK,OACLxB,KAAK,QACLiC,YAAY,QACZhC,MAAOlB,EAAKL,MACZ+C,SAAU1B,MAId,qBAAKqB,UAAU,wBAAf,SACE,uBACEI,KAAK,OACLS,YAAY,cACZhC,MAAOlB,EAAKJ,YACZ8C,SAAU1B,EACVC,KAAK,kBAIT,qBAAKoB,UAAU,wBAAf,SACE,uBACEY,UAAQ,EACRR,KAAK,OACLS,YAAY,QACZhC,MAAOlB,EAAKH,MACZ6C,SAAU1B,EACVC,KAAK,YAGT,qBAAKoB,UAAU,wBAAf,SACE,yBACEpB,KAAK,WACLyB,SAAU1B,EACVmC,aAAa,WACbF,UAAQ,EAJV,UAKE,wBAAQ/B,MAAM,WAAWkC,UAAQ,EAAjC,6BAGCtE,EAAWuE,KAAI,SAACvD,EAAUlC,GAAX,OACd,wBAAgBsD,MAAOpB,EAASmB,KAAhC,SACGnB,EAASmB,MADCrD,WAMnB,wBAAQyE,UAAU,8BAAlB,8BA7GJ,oBAAIC,MAAO,CAAEC,OAAQ,OAAQe,MAAO,MAAOC,cAAe,OAA1D","file":"static/js/20.5914ccb7.chunk.js","sourcesContent":["import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import React, { useState } from \"react\";\nimport \"./CreateProduct.css\";\nimport axios from \"axios\";\nimport { useStateValue } from \"../../../StateProvider\";\nimport Loading from \"../../Screens/Global/Loading\";\n\nimport { useNavigate } from \"react-router-dom\";\n\nconst CreateProduct = () => {\n  const navigate = useNavigate();\n  const { categoriesAPI, productsAPI, userAPI, token } = useStateValue();\n  const [isAdmin] = userAPI.isAdmin;\n  const [categories] = categoriesAPI.categories;\n  const [callback, setCallback] = productsAPI.callback;\n\n  const [imageUpload, setImageUpload] = useState(false);\n  const [imageShow, setImageShow] = useState();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const [data, setData] = useState({\n    product_id: \"\",\n    title: \"\",\n    description: \"\",\n    price: \"\",\n    category: \"\",\n    images: \"\",\n  });\n\n  const handleFileChange = async (e) => {\n    const getFile = e.target.files[0];\n    if (!getFile) return alert(\"File Doesn't exist\");\n\n    let formData = new FormData();\n    formData.append(\"file\", getFile);\n    setImageUpload(formData);\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      setImageShow(reader.result);\n    };\n\n    reader.readAsDataURL(getFile);\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n\n    setData((prevValues) => ({\n      ...prevValues,\n      [name]: value,\n    }));\n  };\n\n  const cancelImage = () => {\n    setImageShow(null);\n    setImageUpload(false);\n  };\n\n  const uploadImage = async () => {\n    try {\n      const res = await axios.post(\"/api/upload\", imageUpload, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n\n      return res;\n    } catch (error) {\n      setError(error.response.data.error);\n    }\n  };\n\n  const funcWithImg = async (d) => {\n    try {\n      const res = await axios.post(\n        \"/api/products\",\n        {\n          ...data,\n          images: { public_id: d.data.public_id, url: d.data.url },\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token[0]}`,\n          },\n        }\n      );\n      setCallback(!callback);\n      setLoading(false);\n      navigate(\"/dashboard/products\");\n\n      return res;\n    } catch (error) {\n      setError(error.response.data.error);\n      setLoading(false);\n      return error.response.data;\n    }\n  };\n\n  const funcWithoutImg = async () => {\n    try {\n      const res = await axios.post(\n        \"/api/products\",\n        {\n          ...data,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token[0]}`,\n          },\n        }\n      );\n      setCallback(!callback);\n      setLoading(false);\n      navigate(\"/dashboard/products\");\n\n      return res;\n    } catch (error) {\n      setError(error.response.data.error);\n      setLoading(false);\n      return error.response.data;\n    }\n  };\n\n  const productFunc = async (d) => {\n    if (d) {\n      funcWithImg(d);\n    }\n    if (!d) {\n      funcWithoutImg();\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (imageUpload) {\n      setLoading(true);\n      uploadImage().then(productFunc);\n    }\n    if (!imageUpload) {\n      productFunc();\n    }\n  };\n\n  if (!isAdmin) {\n    return (\n      <h1 style={{ margin: \"15px\", color: \"red\", letterSpacing: \"2px\" }}>\n        You don't have permission to visit this route\n      </h1>\n    );\n  }\n\n  if (error) {\n    setTimeout(() => {\n      setError(null);\n    }, 2000);\n  }\n\n  if (loading) {\n    return <Loading />;\n  }\n\n  return (\n    <div className=\"create__product\">\n      {error && <div className=\"error__box\">{error}</div>}\n      <h1 style={{ margin: \"0 30px \" }}>Create Product</h1>\n\n      <form onSubmit={handleSubmit} className=\"create__product-form\">\n        <div className=\"create__product-container-leftSection\">\n          {!imageShow && (\n            <input\n              type=\"file\"\n              name=\"file\"\n              onChange={handleFileChange}\n              className=\"create__product-leftSection-image-input\"\n            />\n          )}\n          {imageShow && (\n            <div className=\"create__product-image-preview\">\n              <img\n                src={imageShow}\n                alt=\"\"\n                width=\"100%\"\n                height=\"100%\"\n                style={{ objectFit: \"cover\" }}\n              />\n\n              <div\n                className=\"create__product-cancel-image\"\n                onClick={cancelImage}>\n                X\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"create__product-container-rightSection\">\n          <div className=\"create__product-input\">\n            <input\n              required\n              type=\"text\"\n              placeholder=\"Product Id\"\n              value={data.product_id}\n              onChange={handleChange}\n              name=\"product_id\"\n            />\n          </div>\n\n          <div className=\"create__product-input\">\n            <input\n              required\n              type=\"text\"\n              name=\"title\"\n              placeholder=\"Title\"\n              value={data.title}\n              onChange={handleChange}\n            />\n          </div>\n\n          <div className=\"create__product-input\">\n            <input\n              type=\"text\"\n              placeholder=\"Description\"\n              value={data.description}\n              onChange={handleChange}\n              name=\"description\"\n            />\n          </div>\n\n          <div className=\"create__product-input\">\n            <input\n              required\n              type=\"text\"\n              placeholder=\"Price\"\n              value={data.price}\n              onChange={handleChange}\n              name=\"price\"\n            />\n          </div>\n          <div className=\"create__product-input\">\n            <select\n              name=\"category\"\n              onChange={handleChange}\n              defaultValue=\"Category\"\n              required>\n              <option value=\"Category\" disabled>\n                Select Category\n              </option>\n              {categories.map((category, i) => (\n                <option key={i} value={category.name}>\n                  {category.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          <button className=\"create__product-form-button\">Submit</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default CreateProduct;\n"],"sourceRoot":""}
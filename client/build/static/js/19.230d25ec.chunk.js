(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[19],{223:function(e,t,r){},327:function(e,t,r){"use strict";r.r(t);var n=r(12),a=r(99),c=r(7),i=r.n(c),s=r(8),u=r(2),o=r(1),p=(r(223),r(10)),l=r.n(p),d=r(13),j=r(5),b=r(3),O=r(0);t.default=function(){var e=Object(b.g)(),t=Object(d.b)(),r=t.categoriesAPI,c=t.productsAPI,p=t.userAPI,f=t.token,h=Object(u.a)(p.isAdmin,1)[0],v=Object(u.a)(r.categories,1)[0],m=Object(u.a)(c.callback,2),x=m[0],g=m[1],_=Object(o.useState)(!1),y=Object(u.a)(_,2),w=y[0],N=y[1],P=Object(o.useState)(),S=Object(u.a)(P,2),k=S[0],C=S[1],D=Object(o.useState)(!1),A=Object(u.a)(D,2),q=A[0],F=A[1],I=Object(o.useState)(null),T=Object(u.a)(I,2),z=T[0],B=T[1],E=Object(o.useState)({product_id:"",title:"",description:"",price:"",category:"",images:""}),J=Object(u.a)(E,2),R=J[0],L=J[1],U=function(){var e=Object(s.a)(i.a.mark((function e(t){var r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.files[0]){e.next=3;break}return e.abrupt("return",alert("File Doesn't exist"));case 3:(n=new FormData).append("file",r),N(n),(a=new FileReader).onloadend=function(){C(a.result)},a.readAsDataURL(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=e.target,r=t.name,c=t.value;L((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(n.a)({},r,c))}))},X=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/upload",w,{headers:{"Content-Type":"multipart/form-data"}});case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),B(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var t=Object(s.a)(i.a.mark((function t(r){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.post("/api/products",Object(a.a)(Object(a.a)({},R),{},{images:{public_id:r.data.public_id,url:r.data.url}}),{headers:{Authorization:"Bearer ".concat(f[0])}});case 3:return n=t.sent,g(!x),F(!1),e("/dashboard/products"),t.abrupt("return",n);case 10:return t.prev=10,t.t0=t.catch(0),B(t.t0.response.data.error),F(!1),t.abrupt("return",t.t0.response.data);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),G=function(){var t=Object(s.a)(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.post("/api/products",Object(a.a)({},R),{headers:{Authorization:"Bearer ".concat(f[0])}});case 3:return r=t.sent,g(!x),F(!1),e("/dashboard/products"),t.abrupt("return",r);case 10:return t.prev=10,t.t0=t.catch(0),B(t.t0.response.data.error),F(!1),t.abrupt("return",t.t0.response.data);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),H=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&Y(t),t||G();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),w&&(F(!0),X().then(H)),w||H();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return h?(z&&setTimeout((function(){B(null)}),2e3),q?Object(O.jsx)(j.a,{}):Object(O.jsxs)("div",{className:"create__product",children:[z&&Object(O.jsx)("div",{className:"error__box",children:z}),Object(O.jsx)("h1",{style:{margin:"0 30px "},children:"Create Product"}),Object(O.jsxs)("form",{onSubmit:K,className:"create__product-form",children:[Object(O.jsxs)("div",{className:"create__product-container-leftSection",children:[!k&&Object(O.jsx)("input",{type:"file",name:"file",onChange:U,className:"create__product-leftSection-image-input"}),k&&Object(O.jsxs)("div",{className:"create__product-image-preview",children:[Object(O.jsx)("img",{src:k,alt:"",width:"100%",height:"100%",style:{objectFit:"cover"}}),Object(O.jsx)("div",{className:"create__product-cancel-image",onClick:function(){C(null),N(!1)},children:"X"})]})]}),Object(O.jsxs)("div",{className:"create__product-container-rightSection",children:[Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsx)("input",{required:!0,type:"text",placeholder:"Product Id",value:R.product_id,onChange:V,name:"product_id"})}),Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsx)("input",{required:!0,type:"text",name:"title",placeholder:"Title",value:R.title,onChange:V})}),Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsx)("input",{type:"text",placeholder:"Description",value:R.description,onChange:V,name:"description"})}),Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsx)("input",{required:!0,type:"text",placeholder:"Price",value:R.price,onChange:V,name:"price"})}),Object(O.jsx)("div",{className:"create__product-input",children:Object(O.jsxs)("select",{name:"category",onChange:V,defaultValue:"Category",required:!0,children:[Object(O.jsx)("option",{value:"Category",disabled:!0,children:"Select Category"}),v.map((function(e,t){return Object(O.jsx)("option",{value:e.name,children:e.name},t)}))]})}),Object(O.jsx)("button",{className:"create__product-form-button",children:"Submit"})]})]})]})):Object(O.jsx)("h1",{style:{margin:"15px",color:"red",letterSpacing:"2px"},children:"You don't have permission to visit this route"})}},99:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(12);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}}}]);
//# sourceMappingURL=19.230d25ec.chunk.js.map
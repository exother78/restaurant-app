(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{111:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price*t.quantity+e}),0)}},123:function(e,t,r){"use strict";var a=r(2),n=r(1),o=(r(124),r(111)),c=r(24),i=r.n(c),s=r(13),l=r(3),d=r(4),u=r(0);t.a=function(){var e=Object(l.g)(),t=Object(s.b)(),r=Object(a.a)(t.basket,2),c=r[0],p=r[1],b=Object(n.useState)(null),v=Object(a.a)(b,2),j=v[0],h=v[1],O=Object(s.b)().userAPI,m=Object(a.a)(O.postalData,1)[0],f=Object(a.a)(O.deliveryOption,1)[0];return j&&setTimeout((function(){h(null)}),2e3),Object(u.jsx)("div",{className:"order__right-section",children:Object(u.jsxs)("div",{className:"order__right-section-content",children:[Object(u.jsxs)("h2",{className:"orderTotal__title",children:[null===c||void 0===c?void 0:c.length," items in Cart",Object(u.jsx)(i.a,{style:{color:"#d70f64",fontSize:"xx-large"}})]}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(u.jsxs)("div",{className:"order__total-list",children:[Object(u.jsx)("p",{className:"order__total-title",children:null===e||void 0===e?void 0:e.title}),Object(u.jsxs)("p",{className:"order__total-price",children:[Object(u.jsxs)("span",{className:"order__total-list-text",children:["x",null===e||void 0===e?void 0:e.quantity]}),null===e||void 0===e?void 0:e.price," \u20ac"]})]},t)})),Object(u.jsxs)("div",{className:"order__total-list",style:{display:"takeaway"===f?"none":"flex"},children:[Object(u.jsx)("p",{className:"order__total-title"}),Object(u.jsxs)("p",{className:"order__total-price",style:{fontSize:"large",fontWeight:"bold"},children:[Object(u.jsx)("span",{className:"order__total-list-text",style:{fontSize:"small",fontWeight:"bold"},children:"delivery fee"}),null===m||void 0===m?void 0:m.deliveryPrice]})]}),Object(u.jsxs)("h3",{className:"order__total",children:[Object(u.jsx)("span",{children:" Total "}),parseFloat(Object(o.a)(c)).toFixed(2)," \u20ac"]}),"takeaway"===f?null:(null===m||void 0===m?void 0:m.deliveryPrice)?Object(u.jsxs)("h4",{className:"order__total-fee-text",children:["with delivery fee"," ",Object(u.jsx)("span",{children:(parseFloat(Object(o.a)(c))+parseFloat(null===m||void 0===m?void 0:m.deliveryPrice)).toFixed(2)})]}):Object(u.jsx)("h4",{children:"Enter Postal Info"}),Object(u.jsxs)("div",{className:"order__total-btns",children:[Object(u.jsx)("button",{className:"order__total-empty-button",onClick:function(){p([])},children:"Empty Cart"}),Object(u.jsx)(d.b,{to:c.length>0?"/checkout":"/order",className:"order__total-checkout-button-link",children:Object(u.jsx)("button",{className:"order__total-checkout-button",onClick:function(){c.length>0&&e("/checkout")},children:"Checkout"})})]})]})})}},124:function(e,t,r){},203:function(e,t,r){},339:function(e,t,r){"use strict";r.r(t);var a=r(7),n=r.n(a),o=r(8),c=r(2),i=r(1),s=(r(203),r(204)),l=r(0),d=function(e){var t=e.onSuccess,r=e.onCancel,a=e.onError,n=e.total,o=e.loading;e.setError;return Object(l.jsx)(s.c,{deferLoading:o,options:{"client-id":"ATSNzle97H2HdLUL3GMnS5I8PuKouWyteOOCVNR-3UqTW5N_0tFs3ddtDitE1IfqAlRXI4hbaEo2yDT9","merchant-id":"92V8XPRZFHZRE",locale:"it_IT",intent:"capture",currency:"EUR"},children:Object(l.jsx)(s.b,{fundingSource:s.a.PAYPAL,onApprove:t,onError:a,onCancel:r,createOrder:function(e,t){if(console.log("data: ",e),0!==n)return t.order.create({purchase_units:[{amount:{value:n}}]})},style:{layout:"horizontal",label:"checkout",height:40}})})},u=r(9),p=r.n(u),b=r(3),v=r(123),j=r(13),h=r(111),O=r(19);t.default=function(){var e=Object(b.g)(),t=Object(j.b)(),r=Object(j.b)(),a=r.userAPI,s=r.token,u=a.email,m=a.lastName,f=a.name,y=a.phone,x=a.userID,k=null===t||void 0===t?void 0:t.basket,_=Object(c.a)(k,2),g=_[0],N=_[1],w=null===a||void 0===a?void 0:a.postalCode,D=Object(c.a)(w,1)[0],I=null===a||void 0===a?void 0:a.address,C=Object(c.a)(I,1)[0],P=null===a||void 0===a?void 0:a.building,F=Object(c.a)(P,1)[0],S=null===a||void 0===a?void 0:a.checkPhone,E=Object(c.a)(S,1)[0],A=null===a||void 0===a?void 0:a.checkEmail,T=Object(c.a)(A,1)[0],z=null===a||void 0===a?void 0:a.checkName,R=Object(c.a)(z,1)[0],q=Object(c.a)(a.postalData,1)[0],B=Object(c.a)(a.paymentOption,1)[0],L=Object(c.a)(a.deliveryOption,1)[0],W=Object(c.a)(a.takeaway,1)[0],H=Object(i.useState)(""),U=Object(c.a)(H,2),J=U[0],V=U[1],X=Object(i.useState)(!0),Z=Object(c.a)(X,2),G=Z[0],K=Z[1],M=Object(i.useState)(null),Y=Object(c.a)(M,2),Q=Y[0],$=Y[1];Object(i.useEffect)((function(){$(parseFloat(Object(h.a)(g))+parseFloat(null===q||void 0===q?void 0:q.deliveryPrice))}),[g,null===q||void 0===q?void 0:q.deliveryPrice]);var ee=function(){var t=Object(o.a)(n.a.mark((function t(r){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("payment data: ",r),a=Date.now()+1983,t.prev=2,t.next=5,p.a.post("/api/user/createorder",{orders:{orderNumber:a,userID:x,postalCode:D,address:C,paymentID:r.orderID,building:F,basket:g,name:f||R,email:u||T,lastName:m,phone:y||E,time:a,total:Object(h.a)(g),deliveryCharges:null===q||void 0===q?void 0:q.deliveryPrice,deliveryOption:L,paymentOption:B,paymentStatus:"received"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){N([]),e("/checkout/ordersuccess/".concat(a))}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),V(t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),te=function(){var t=Object(o.a)(n.a.mark((function t(r){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("payment data: ",r),a=Date.now()+1983,t.prev=2,t.next=5,p.a.post("/api/user/createorder",{orders:{orderNumber:a,userID:x,paymentID:r.orderID,basket:g,name:f||R,email:u||T,lastName:m,phone:y||E,time:a,total:Object(h.a)(g),deliveryOption:L,paymentOption:B,paymentStatus:"received"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){N([]),e("/checkout/ordersuccess/".concat(a))}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),V(t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),re=function(){var t=Object(o.a)(n.a.mark((function t(){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now()+1983,t.prev=1,t.next=4,p.a.post("/api/user/createorder",{orders:{orderNumber:r,userID:x,postalCode:D,address:C,building:F,basket:g,name:f||R,email:u||T,lastName:m,phone:y||E,time:r,total:Object(h.a)(g),deliveryCharges:null===q||void 0===q?void 0:q.deliveryPrice,deliveryOption:L,paymentOption:B,paymentStatus:"pending"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){N([]),e("/checkout/ordersuccess/".concat(r))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),V(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),ae=function(){var t=Object(o.a)(n.a.mark((function t(){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now()+1983,t.prev=1,t.next=4,p.a.post("/api/user/createorder",{orders:{orderNumber:r,userID:x,basket:g,name:f||R,email:u||T,lastName:m,phone:y||E,time:r,total:Object(h.a)(g),deliveryOption:L,paymentOption:B,paymentStatus:"pending"}},{headers:{Authorization:"Bearer ".concat(s[0])}}).then((function(){N([]),e("/checkout/ordersuccess/".concat(r))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),V(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),ne=function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V("Transaction not successful");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V("Cancelled Transaction");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t;D&&C&&F&&R&&T&&E&&!((null===(e=parseFloat(Object(h.a)(g)))||void 0===e?void 0:e.toFixed(2))<parseFloat(null===q||void 0===q?void 0:q.minOrder))&&0!==g.length&&q||K(!0),(D&&C&&F&&R&&T&&E&&(null===(t=parseFloat(Object(h.a)(g)))||void 0===t?void 0:t.toFixed(2))>=parseInt(null===q||void 0===q?void 0:q.minOrder)&&g.length>0&&q||W&&T&&R&&E)&&K(!1)}),[F,g,C,G,R,T,E,null===q||void 0===q?void 0:q.minOrder,W,D,q]),J&&setTimeout((function(){V(null)}),2e3),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"paymentOptions",children:[J&&Object(l.jsx)("div",{className:"error__box",children:J}),Object(l.jsx)(v.a,{}),Object(l.jsx)("div",{className:"paymentOptions-Paypal-btn",children:"paypaldelivery"===B?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("button",{onClick:function(e){return"homedelivery"===L?ee({orderID:"something now"},e):"takeaway"===L&&te({orderID:"something now"},e)},style:{padding:"10px 15px",margin:"10px"},children:"Pay the bill"}),Object(l.jsx)(d,{total:"takeaway"===L?Object(h.a)(g):Q,onSuccess:"homedelivery"===L?ee:"takeaway"===L&&te,onCancel:oe,onError:ne,setError:V,loading:G})]}):"cashondelivery"===B&&Object(l.jsx)("button",{className:"paymentOptions-confirmOrder-btn",onClick:"homedelivery"===L?re:ae,children:"Confirm Order"})})]}),Object(l.jsx)(O.a,{})]})}}}]);
//# sourceMappingURL=11.892db3e0.chunk.js.map
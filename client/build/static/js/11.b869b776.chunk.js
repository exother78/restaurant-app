(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{110:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price*t.quantity+e}),0)}},122:function(e,t,n){"use strict";var r=n(2),o=n(1),a=(n(123),n(110)),c=n(23),i=n.n(c),l=n(13),s=n(3),d=n(4),u=n(0);t.a=function(){var e=Object(s.g)(),t=Object(l.b)(),n=Object(r.a)(t.basket,2),c=n[0],b=n[1],j=Object(o.useState)(null),v=Object(r.a)(j,2),h=v[0],p=v[1],O=Object(l.b)().userAPI,f=Object(r.a)(O.postalData,1)[0];return h&&setTimeout((function(){p(null)}),2e3),Object(u.jsxs)("div",{className:"order__right-section",children:[Object(u.jsxs)("div",{className:"order__right-section-content",children:[Object(u.jsxs)("h2",{className:"orderTotal__title",children:[null===c||void 0===c?void 0:c.length," items in Cart",Object(u.jsx)(i.a,{style:{color:"#d70f64",fontSize:"xx-large"}})]}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(u.jsxs)("div",{className:"order__total-list",children:[Object(u.jsx)("p",{className:"order__total-title",children:null===e||void 0===e?void 0:e.title}),Object(u.jsxs)("p",{className:"order__total-price",children:[Object(u.jsxs)("span",{className:"order__total-list-text",children:["x",null===e||void 0===e?void 0:e.quantity]}),null===e||void 0===e?void 0:e.price]})]},t)})),Object(u.jsxs)("h3",{className:"order__total",children:[Object(u.jsx)("span",{children:" Total "}),parseFloat(Object(a.a)(c))]}),(null===f||void 0===f?void 0:f.deliveryPrice)?Object(u.jsxs)("h4",{style:{fontSize:"small"},children:["with delivery fee ",Object(u.jsx)("span",{style:{fontSize:"large",marginLeft:"20px"},children:(parseFloat(Object(a.a)(c))+parseFloat(null===f||void 0===f?void 0:f.deliveryPrice)).toFixed(2)})]}):Object(u.jsx)("h4",{children:"Enter Postal Info"})]}),Object(u.jsxs)("div",{className:"order__total-btns",children:[Object(u.jsx)("button",{className:"order__total-empty-button",onClick:function(){b([])},children:"Empty Cart"}),Object(u.jsx)(d.b,{to:c.length>0?"/checkout":"/order",className:"order__total-checkout-button-link",children:Object(u.jsx)("button",{className:"order__total-checkout-button",onClick:function(){c.length>0&&e("/checkout")},children:"Checkout"})})]})]})}},123:function(e,t,n){},202:function(e,t,n){},335:function(e,t,n){"use strict";n.r(t);var r=n(7),o=n.n(r),a=n(8),c=n(2),i=n(1),l=(n(202),n(203)),s=n(0),d=function(e){var t=e.onSuccess,n=e.onCancel,r=e.onError,o=e.total,a=e.loading;e.setError;return Object(s.jsx)(l.c,{deferLoading:a,options:{"client-id":"ATSNzle97H2HdLUL3GMnS5I8PuKouWyteOOCVNR-3UqTW5N_0tFs3ddtDitE1IfqAlRXI4hbaEo2yDT9","merchant-id":"92V8XPRZFHZRE",locale:"it_IT",intent:"capture",currency:"EUR"},children:Object(s.jsx)(l.b,{fundingSource:l.a.PAYPAL,onApprove:t,onError:r,onCancel:n,createOrder:function(e,t){if(console.log("data: ",e),0!==o)return t.order.create({purchase_units:[{amount:{value:o}}]})},style:{layout:"horizontal",label:"checkout",height:40}})})},u=n(10),b=n.n(u),j=n(3),v=n(122),h=n(13),p=n(110),O=n(29);t.default=function(){Object(j.g)();var e=Object(h.b)(),t=Object(h.b)(),n=t.userAPI,r=t.token,l=n.email,u=n.lastName,f=n.name,m=n.phone,x=n.userID,_=null===e||void 0===e?void 0:e.basket,y=Object(c.a)(_,2),g=y[0],k=(y[1],null===n||void 0===n?void 0:n.postalCode),N=Object(c.a)(k,1)[0],C=null===n||void 0===n?void 0:n.address,F=Object(c.a)(C,1)[0],P=null===n||void 0===n?void 0:n.building,w=Object(c.a)(P,1)[0],E=null===n||void 0===n?void 0:n.checkPhone,I=Object(c.a)(E,1)[0],D=null===n||void 0===n?void 0:n.checkEmail,S=Object(c.a)(D,1)[0],T=null===n||void 0===n?void 0:n.checkName,A=Object(c.a)(T,1)[0],z=Object(c.a)(n.postalData,1)[0],L=Object(i.useState)(""),R=Object(c.a)(L,2),q=R[0],H=R[1],U=Object(i.useState)(!0),J=Object(c.a)(U,2),V=J[0],W=J[1],X=function(){var e=Object(a.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=Date.now(),e.prev=2,e.next=5,b.a.post("/api/user/createorder",{orders:{orderNumber:a+1983,userID:x,postalCode:N,address:F,paymentID:t.orderID,building:w,basket:g,name:f||A,email:l||S,lastName:u,phone:m||I,time:a,total:Object(p.a)(g),deliveryCharges:null===z||void 0===z?void 0:z.deliveryPrice}},{headers:{Authorization:"Bearer ".concat(r[0])}}).then((function(){window.location.href="/checkout/ordersuccess/".concat(a+1983)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),H(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H("Transaction not successful");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H("Cancelled Transaction");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t;N&&F&&w&&A&&S&&I&&!((null===(e=parseFloat(Object(p.a)(g)))||void 0===e?void 0:e.toFixed(2))<parseFloat(null===z||void 0===z?void 0:z.minOrder))&&0!==g.length||W(!0),N&&F&&w&&A&&S&&I&&(null===(t=parseFloat(Object(p.a)(g)))||void 0===t?void 0:t.toFixed(2))>=parseInt(null===z||void 0===z?void 0:z.minOrder)&&g.length>0&&W(!1),0===(null===g||void 0===g?void 0:g.length)&&H("No items in the cart")}),[w,N,g,F,V,A,S,I,null===z||void 0===z?void 0:z.minOrder]),q&&setTimeout((function(){H(null)}),2e3),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"paymentOptions",children:[q&&Object(s.jsx)("div",{className:"error__box",children:q}),Object(s.jsx)(v.a,{}),Object(s.jsxs)("div",{className:"paymentOptions-Paypal-btn",children:[Object(s.jsx)("button",{onClick:function(e){return X({orderID:"something now"},e)},style:{padding:"10px 15px",margin:"10px"},children:"Pay the bill"}),Object(s.jsx)(d,{total:parseFloat(Object(p.a)(g))+parseFloat(null===z||void 0===z?void 0:z.deliveryPrice),onSuccess:X,onCancel:B,onError:Z,setError:H,loading:V})]})]}),Object(s.jsx)(O.a,{})]})}}}]);
//# sourceMappingURL=11.b869b776.chunk.js.map
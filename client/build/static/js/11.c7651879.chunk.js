(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price*t.quantity+e}),0)}},121:function(e,t,n){"use strict";var r=n(2),o=n(1),c=(n(122),n(109)),a=n(23),i=n.n(a),l=n(13),s=n(3),d=n(4),u=n(0);t.a=function(){var e=Object(s.g)(),t=Object(l.b)(),n=Object(r.a)(t.basket,2),a=n[0],b=n[1],j=Object(o.useState)(null),v=Object(r.a)(j,2),h=v[0],p=v[1],O=Object(l.b)().userAPI,f=Object(r.a)(O.postalData,1)[0];return h&&setTimeout((function(){p(null)}),2e3),Object(u.jsxs)("div",{className:"order__right-section",children:[Object(u.jsxs)("div",{className:"order__right-section-content",children:[Object(u.jsxs)("h2",{className:"orderTotal__title",children:[null===a||void 0===a?void 0:a.length," items in Cart",Object(u.jsx)(i.a,{style:{color:"#d70f64",fontSize:"xx-large"}})]}),null===a||void 0===a?void 0:a.map((function(e,t){return Object(u.jsxs)("div",{className:"order__total-list",children:[Object(u.jsx)("p",{className:"order__total-title",children:null===e||void 0===e?void 0:e.title}),Object(u.jsxs)("p",{className:"order__total-price",children:[Object(u.jsxs)("span",{className:"order__total-list-text",children:["x",null===e||void 0===e?void 0:e.quantity]}),null===e||void 0===e?void 0:e.price]})]},t)})),Object(u.jsxs)("h3",{className:"order__total",children:[Object(u.jsx)("span",{children:" Total "}),parseFloat(Object(c.a)(a))]}),(null===f||void 0===f?void 0:f.deliveryPrice)?Object(u.jsxs)("h4",{style:{fontSize:"small"},children:["with delivery fee ",Object(u.jsx)("span",{style:{fontSize:"large",marginLeft:"20px"},children:(parseFloat(Object(c.a)(a))+parseFloat(null===f||void 0===f?void 0:f.deliveryPrice)).toFixed(2)})]}):Object(u.jsx)("h4",{children:"Enter Postal Info"})]}),Object(u.jsxs)("div",{className:"order__total-btns",children:[Object(u.jsx)("button",{className:"order__total-empty-button",onClick:function(){b([])},children:"Empty Cart"}),Object(u.jsx)(d.b,{to:a.length>0?"/checkout":"/order",className:"order__total-checkout-button-link",children:Object(u.jsx)("button",{className:"order__total-checkout-button",onClick:function(){a.length>0&&e("/checkout")},children:"Checkout"})})]})]})}},122:function(e,t,n){},201:function(e,t,n){},337:function(e,t,n){"use strict";n.r(t);var r=n(7),o=n.n(r),c=n(8),a=n(2),i=n(1),l=(n(201),n(202)),s=n(0),d=function(e){var t=e.onSuccess,n=e.onCancel,r=e.onError,o=e.total,c=e.loading;e.setError;return Object(s.jsx)(l.c,{deferLoading:c,options:{"client-id":"ATSNzle97H2HdLUL3GMnS5I8PuKouWyteOOCVNR-3UqTW5N_0tFs3ddtDitE1IfqAlRXI4hbaEo2yDT9","merchant-id":"92V8XPRZFHZRE",locale:"it_IT",intent:"capture",currency:"EUR"},children:Object(s.jsx)(l.b,{fundingSource:l.a.PAYPAL,onApprove:t,onError:r,onCancel:n,createOrder:function(e,t){if(console.log("data: ",e),0!==o)return t.order.create({purchase_units:[{amount:{value:o}}]})},style:{layout:"horizontal",label:"checkout",height:40}})})},u=n(10),b=n.n(u),j=n(3),v=n(121),h=n(13),p=n(109),O=n(29);t.default=function(){var e=Object(j.g)(),t=Object(h.b)(),n=Object(h.b)(),r=n.userAPI,l=n.token,u=r.email,f=r.lastName,m=r.name,x=r.phone,_=r.userID,y=null===t||void 0===t?void 0:t.basket,g=Object(a.a)(y,2),k=g[0],N=g[1],C=null===r||void 0===r?void 0:r.postalCode,F=Object(a.a)(C,1)[0],P=null===r||void 0===r?void 0:r.address,E=Object(a.a)(P,1)[0],I=null===r||void 0===r?void 0:r.building,w=Object(a.a)(I,1)[0],S=null===r||void 0===r?void 0:r.checkPhone,D=Object(a.a)(S,1)[0],T=null===r||void 0===r?void 0:r.checkEmail,A=Object(a.a)(T,1)[0],z=null===r||void 0===r?void 0:r.checkName,L=Object(a.a)(z,1)[0],R=Object(a.a)(r.postalData,1)[0],q=Object(i.useState)(""),H=Object(a.a)(q,2),U=H[0],J=H[1],V=Object(i.useState)(!0),W=Object(a.a)(V,2),X=W[0],Z=W[1],B=function(){var t=Object(c.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.prev=1,t.next=4,b.a.post("/api/user/createorder",{orders:{orderNumber:r+1983,userID:_,postalCode:F,address:E,paymentID:n.orderID,building:w,basket:k,name:m||L,email:u||A,lastName:f,phone:x||D,time:r,total:Object(p.a)(k),deliveryCharges:null===R||void 0===R?void 0:R.deliveryPrice}},{headers:{Authorization:"Bearer ".concat(l[0])}}).then((function(){N([]),e("/checkout/ordersuccess/".concat(r+1983))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),J(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),G=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J("Transaction not successful");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J("Cancelled Transaction");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t;F&&E&&w&&L&&A&&D&&!((null===(e=parseFloat(Object(p.a)(k)))||void 0===e?void 0:e.toFixed(2))<parseFloat(null===R||void 0===R?void 0:R.minOrder))&&0!==k.length||Z(!0),F&&E&&w&&L&&A&&D&&(null===(t=parseFloat(Object(p.a)(k)))||void 0===t?void 0:t.toFixed(2))>=parseInt(null===R||void 0===R?void 0:R.minOrder)&&k.length>0&&Z(!1),0===(null===k||void 0===k?void 0:k.length)&&J("No items in the cart")}),[w,F,k,E,X,L,A,D,null===R||void 0===R?void 0:R.minOrder]),U&&setTimeout((function(){J(null)}),2e3),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"paymentOptions",children:[U&&Object(s.jsx)("div",{className:"error__box",children:U}),Object(s.jsx)(v.a,{}),Object(s.jsxs)("div",{className:"paymentOptions-Paypal-btn",children:[Object(s.jsx)("button",{onClick:function(e){return B({orderID:"something now"},e)},style:{padding:"10px 15px",margin:"10px"},children:"Pay the bill"}),Object(s.jsx)(d,{total:parseFloat(Object(p.a)(k))+parseFloat(null===R||void 0===R?void 0:R.deliveryPrice),onSuccess:B,onCancel:K,onError:G,setError:J,loading:X})]})]}),Object(s.jsx)(O.a,{})]})}}}]);
//# sourceMappingURL=11.c7651879.chunk.js.map
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[8],{125:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var r=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price*t.quantity+e}),0)}},144:function(e,t,c){"use strict";var r=c(27),a=c(19),n=c(3),s=(c(1),c(145),c(18)),o=c(0);t.a=function(e){var t=e.id,c=e.title,i=e.description,l=e.price,u=e.image,d=(e.removeID,e.quantity),j=Object(s.b)(),b=Object(n.a)(j.basket,2),h=b[0],p=b[1];return Object(o.jsx)("div",{className:"cart__product",children:Object(o.jsxs)("div",{className:"cart__product-container",children:[Object(o.jsx)("div",{className:"cart__product-image-container",children:Object(o.jsx)("img",{src:u,alt:"",className:"cart__product-image"})}),Object(o.jsxs)("div",{className:"cart__product-text-section",children:[Object(o.jsx)("h3",{className:"cart__product-title",children:c}),Object(o.jsx)("p",{className:"cartProduct__description",children:i.substring(0,60)}),Object(o.jsxs)("p",{className:"cart__product-price",children:["\u20ac ",l]})]}),Object(o.jsxs)("div",{className:"cart__product-price-incre",children:[Object(o.jsx)("button",{type:"button",className:"cartProduct__minus cartProduct__same",onClick:function(){var e=h.findIndex((function(e){return e.id===t}));if(-1!==e){if(h[e].quantity>1){var c=Object(a.a)(h);c[e]=Object(r.a)(Object(r.a)({},c[e]),{},{quantity:c[e].quantity-1}),p(c)}if(1===h[e].quantity){var n=Object(a.a)(h);n.splice(e,1),p(n)}}},children:"-"}),Object(o.jsx)("span",{className:"cartProduct__quantity cartProduct__same",children:d}),Object(o.jsx)("button",{type:"button",className:"cartProduct__plus cartProduct__same",onClick:function(){var e=h.findIndex((function(e){return e.id===t}));if(-1!==e){var c=Object(a.a)(h);c[e]=Object(r.a)(Object(r.a)({},c[e]),{},{quantity:c[e].quantity+1}),p(c)}},children:"+"})]})]})})}},145:function(e,t,c){},211:function(e,t,c){},330:function(e,t,c){"use strict";c.r(t);var r=c(27),a=c(8),n=c.n(a),s=c(12),o=c(3),i=c(1),l=(c(211),c(18)),u=c(144),d=c(125),j=c(14),b=c.n(j),h=c(212),p=c(0),O=function(e){var t=e.onSuccess,c=e.onCancel,r=e.onError,a=e.total,n=e.loading;e.setError;return Object(p.jsx)(h.c,{deferLoading:n,options:{"client-id":"ATSNzle97H2HdLUL3GMnS5I8PuKouWyteOOCVNR-3UqTW5N_0tFs3ddtDitE1IfqAlRXI4hbaEo2yDT9","merchant-id":"92V8XPRZFHZRE",locale:"it_IT",intent:"capture",currency:"EUR"},children:Object(p.jsx)(h.b,{fundingSource:h.a.PAYPAL,onApprove:t,onError:r,onCancel:c,createOrder:function(e,t){if(console.log("data: ",e),0!==a)return t.order.create({purchase_units:[{amount:{value:a}}]})},style:{layout:"horizontal",label:"checkout",height:40}})})};t.default=function(){var e,t=Object(l.b)(),c=Object(l.b)(),a=c.userAPI,j=c.token,h=Object(o.a)(a.postalCode,2),m=h[0],f=h[1],x=a.email,_=a.lastName,v=a.name,y=a.userID,g=Object(o.a)(t.basket,2),N=g[0],k=g[1],P=Object(i.useState)(""),C=Object(o.a)(P,2),w=C[0],E=C[1],q=Object(i.useState)(""),I=Object(o.a)(q,2),D=I[0],S=I[1],A=Object(i.useState)(""),F=Object(o.a)(A,2),T=F[0],L=F[1],R=Object(i.useState)(!0),W=Object(o.a)(R,2),z=W[0],H=W[1],U=function(){var e=Object(s.a)(n.a.mark((function e(t){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Date.now(),e.prev=1,w||L("Please enter your address to continue order"),y||L("Please Login to continue"),m||L("Please Enter your postal code to continue"),!(y&&m&&w&&N.length>0)){e.next=8;break}return e.next=8,b.a.post("/api/user/createorder",{orders:{orderNumber:c+1983,userID:y,postalCode:m,address:w,paymentID:t.orderID,street:D,basket:N,name:v,email:x,lastName:_,time:c,total:Object(d.a)(N)}},{headers:{Authorization:"Bearer ".concat(j[0])}}).then((function(){k([]),window.location.href="/"}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),L(e.t0.response.data.error);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L("Transaction not successful");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("cancelled: ",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return T&&setTimeout((function(){L(null)}),2e3),Object(i.useEffect)((function(){y&&m&&w&&D&&0!==N.length||H(!0),y&&m&&w&&D&&N.length>0&&H(!1)}),[D,y,m,N,w,z]),Object(p.jsxs)("div",{className:"checkout",children:[T&&Object(p.jsx)("div",{className:"error__box",children:T}),Object(p.jsx)("div",{className:"errorShowPayment",style:{position:"relative",display:z?"flex":"none",justifyContent:"center",color:"red",fontWeight:"600",letterSpacing:".7px",transition:"all .3s ease-in"},children:Object(p.jsx)("p",{children:"* Please login and fill the Complete details to proceed payment "})}),Object(p.jsx)("form",{children:Object(p.jsxs)("div",{className:"checkout__categories",style:{marginTop:"20px"},children:[Object(p.jsxs)("div",{className:"checkout__category",children:[Object(p.jsx)("div",{className:"checkout__category-title",children:Object(p.jsx)("h2",{children:"Delivery Address"})}),Object(p.jsxs)("div",{className:"checkout__category-details",children:[Object(p.jsxs)("div",{className:"checkout__form-group",children:[Object(p.jsxs)("label",{htmlFor:"address",style:{display:"flex",justifyContent:"space-between"},children:["Address",Object(p.jsx)("span",{className:"checkout__form-group-span",style:{display:0===w.length?"block":"none"},children:"Enter Address*"})]}),Object(p.jsx)("input",{type:"text",name:"address",required:!0,value:w||"",placeholder:"eg. Dusseldorf",onChange:function(e){return E(e.target.value)}})]}),Object(p.jsxs)("div",{className:"checkout__form-group",children:[Object(p.jsxs)("label",{htmlFor:"street",children:["Enter Street No.",Object(p.jsx)("span",{className:"checkout__form-group-span",style:{display:0===w.length?"block":"none"},children:"Enter Street*"})]}),Object(p.jsx)("input",{type:"text",name:"street",required:!0,value:D||"",placeholder:"eg. street no.6 house no.1",onChange:function(e){return S(e.target.value)}})]}),Object(p.jsxs)("div",{className:"checkout__form-group",children:[Object(p.jsxs)("label",{htmlFor:"street",children:["Postal Code",Object(p.jsx)("span",{className:"checkout__form-group-span",style:{display:0===w.length?"block":"none"},children:"Enter Postal Code*"})]}),Object(p.jsx)("input",{type:"text",name:"postalCode",required:!0,value:m||"",placeholder:"Postal Code",onChange:function(e){f(e.target.value)}})]})]})]}),Object(p.jsxs)("div",{className:"checkout__category",children:[Object(p.jsx)("div",{className:"checkout__category-title",children:Object(p.jsx)("h2",{children:"Review Items and Delivery"})}),Object(p.jsx)("div",{className:"checkout__category-details",style:{flexWrap:"wrap"},children:null===N||void 0===N?void 0:N.map((function(e,t){return Object(i.createElement)(u.a,Object(r.a)(Object(r.a)({},e),{},{removeID:t,key:t}))}))})]}),Object(p.jsxs)("div",{className:"checkout__category",children:[Object(p.jsx)("div",{className:"checkout__category-title",children:Object(p.jsx)("h2",{children:"Payment Methods"})}),Object(p.jsx)("div",{className:"checkout__category-details",children:Object(p.jsx)("div",{className:"checkout__payment-section",style:{width:"60%"},children:Object(p.jsxs)("h2",{style:{marginTop:"20px"},children:["Total ",Object(p.jsx)("span",{style:{marginLeft:"20px"}}),null===(e=parseFloat(Object(d.a)(N)))||void 0===e?void 0:e.toFixed(2)," \u20ac"]})})})]}),Object(p.jsx)("button",{type:"submit",onClick:function(e){return e.preventDefault()},style:{border:"none"},children:Object(p.jsx)(O,{total:parseFloat(Object(d.a)(N)).toFixed(2),onSuccess:U,onCancel:M,onError:J,setError:L,loading:z})})]})})]})}}}]);
//# sourceMappingURL=8.5713ecbb.chunk.js.map
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{111:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price*t.quantity+e}),0)}},123:function(e,t,n){"use strict";var r=n(2),a=n(1),o=(n(124),n(111)),c=n(24),i=n.n(c),l=n(13),s=n(3),d=n(4),u=n(0);t.a=function(){var e=Object(s.g)(),t=Object(l.b)(),n=Object(r.a)(t.basket,2),c=n[0],b=n[1],j=Object(a.useState)(null),v=Object(r.a)(j,2),p=v[0],O=v[1],h=Object(l.b)().userAPI,m=Object(r.a)(h.postalData,1)[0];Object(r.a)(h.deliveryOption,1)[0];return p&&setTimeout((function(){O(null)}),2e3),Object(u.jsx)("div",{className:"order__right-section",children:Object(u.jsxs)("div",{className:"order__right-section-content",children:[Object(u.jsxs)("h2",{className:"orderTotal__title",children:[null===c||void 0===c?void 0:c.length," items in Cart",Object(u.jsx)(i.a,{style:{color:"#d70f64",fontSize:"xx-large"}})]}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(u.jsxs)("div",{className:"order__total-list",children:[Object(u.jsx)("p",{className:"order__total-title",children:null===e||void 0===e?void 0:e.title}),Object(u.jsxs)("p",{className:"order__total-price",children:[Object(u.jsxs)("span",{className:"order__total-list-text",children:["x",null===e||void 0===e?void 0:e.quantity]}),null===e||void 0===e?void 0:e.price]})]},t)})),Object(u.jsxs)("h3",{className:"order__total",children:[Object(u.jsx)("span",{children:" Total "}),parseFloat(Object(o.a)(c))]}),(null===m||void 0===m?void 0:m.deliveryPrice)?Object(u.jsxs)("h4",{className:"order__total-fee-text",children:["with delivery fee ",Object(u.jsx)("span",{children:(parseFloat(Object(o.a)(c))+parseFloat(null===m||void 0===m?void 0:m.deliveryPrice)).toFixed(2)})]}):Object(u.jsx)("h4",{children:"Enter Postal Info"}),Object(u.jsxs)("div",{className:"order__total-btns",children:[Object(u.jsx)("button",{className:"order__total-empty-button",onClick:function(){b([])},children:"Empty Cart"}),Object(u.jsx)(d.b,{to:c.length>0?"/checkout":"/order",className:"order__total-checkout-button-link",children:Object(u.jsx)("button",{className:"order__total-checkout-button",onClick:function(){c.length>0&&e("/checkout")},children:"Checkout"})})]})]})})}},124:function(e,t,n){},203:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),o=n(8),c=n(2),i=n(1),l=(n(203),n(204)),s=n(0),d=function(e){var t=e.onSuccess,n=e.onCancel,r=e.onError,a=e.total,o=e.loading;e.setError;return Object(s.jsx)(l.c,{deferLoading:o,options:{"client-id":"ATSNzle97H2HdLUL3GMnS5I8PuKouWyteOOCVNR-3UqTW5N_0tFs3ddtDitE1IfqAlRXI4hbaEo2yDT9","merchant-id":"92V8XPRZFHZRE",locale:"it_IT",intent:"capture",currency:"EUR"},children:Object(s.jsx)(l.b,{fundingSource:l.a.PAYPAL,onApprove:t,onError:r,onCancel:n,createOrder:function(e,t){if(console.log("data: ",e),0!==a)return t.order.create({purchase_units:[{amount:{value:a}}]})},style:{layout:"horizontal",label:"checkout",height:40}})})},u=n(9),b=n.n(u),j=n(3),v=n(123),p=n(13),O=n(111),h=n(19);t.default=function(){var e=Object(j.g)(),t=Object(p.b)(),n=Object(p.b)(),r=n.userAPI,l=n.token,u=r.email,m=r.lastName,f=r.name,x=r.phone,y=r.userID,k=null===t||void 0===t?void 0:t.basket,_=Object(c.a)(k,2),N=_[0],g=_[1],w=null===r||void 0===r?void 0:r.postalCode,I=Object(c.a)(w,1)[0],P=null===r||void 0===r?void 0:r.address,C=Object(c.a)(P,1)[0],D=null===r||void 0===r?void 0:r.building,E=Object(c.a)(D,1)[0],F=null===r||void 0===r?void 0:r.checkPhone,S=Object(c.a)(F,1)[0],T=null===r||void 0===r?void 0:r.checkEmail,A=Object(c.a)(T,1)[0],z=null===r||void 0===r?void 0:r.checkName,R=Object(c.a)(z,1)[0],q=Object(c.a)(r.postalData,1)[0],L=Object(c.a)(r.paymentOption,1)[0],H=Object(c.a)(r.deliveryOption,1)[0],U=Object(i.useState)(""),B=Object(c.a)(U,2),J=B[0],V=B[1],W=Object(i.useState)(!0),X=Object(c.a)(W,2),Z=X[0],G=X[1],K=Object(i.useState)(null),M=Object(c.a)(K,2),Y=M[0],Q=M[1];console.log("delivery option: ",H),Object(i.useEffect)((function(){Q(parseFloat(Object(O.a)(N))+parseFloat(null===q||void 0===q?void 0:q.deliveryPrice))}),[N,null===q||void 0===q?void 0:q.deliveryPrice]);var $=function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now()+1983,t.prev=1,t.next=4,b.a.post("/api/user/createorder",{orders:{orderNumber:r,userID:y,postalCode:I,address:C,paymentID:n.orderID,building:E,basket:N,name:f||R,email:u||A,lastName:m,phone:x||S,time:r,total:Object(O.a)(N),deliveryCharges:null===q||void 0===q?void 0:q.deliveryPrice,deliveryOption:H,paymentOption:L,paymentStatus:"received"}},{headers:{Authorization:"Bearer ".concat(l[0])}}).then((function(){g([]),e("/checkout/ordersuccess/".concat(r))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),V(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),ee=function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now()+1983,t.prev=1,t.next=4,b.a.post("/api/user/createorder",{orders:{orderNumber:r,userID:y,paymentID:n.orderID,basket:N,name:f||R,email:u||A,lastName:m,phone:x||S,time:r,total:Object(O.a)(N),deliveryOption:H,paymentOption:L,paymentStatus:"received"}},{headers:{Authorization:"Bearer ".concat(l[0])}}).then((function(){g([]),e("/checkout/ordersuccess/".concat(r))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),V(t.t0.response.data.error);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),te=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V("Transaction not successful");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V("Cancelled Transaction");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t;I&&C&&E&&R&&A&&S&&!((null===(e=parseFloat(Object(O.a)(N)))||void 0===e?void 0:e.toFixed(2))<parseFloat("takeaway"===H?"10":null===q||void 0===q?void 0:q.minOrder))&&0!==N.length||G(!0),I&&C&&E&&R&&A&&S&&(null===(t=parseFloat(Object(O.a)(N)))||void 0===t?void 0:t.toFixed(2))>=parseInt("takeaway"===H?"10":null===q||void 0===q?void 0:q.minOrder)&&N.length>0&&G(!1),0===(null===N||void 0===N?void 0:N.length)&&V("No items in the cart")}),[E,I,N,C,Z,R,A,S,null===q||void 0===q?void 0:q.minOrder,H]),J&&setTimeout((function(){V(null)}),2e3),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"paymentOptions",children:[J&&Object(s.jsx)("div",{className:"error__box",children:J}),Object(s.jsx)(v.a,{}),Object(s.jsxs)("div",{className:"paymentOptions-Paypal-btn",children:[Object(s.jsx)("button",{onClick:function(e){return $({orderID:"something now"},e)},style:{padding:"10px 15px",margin:"10px"},children:"Pay the bill"}),Object(s.jsx)(d,{total:"takeaway"===H?Object(O.a)(N):Y,onSuccess:"homedelivery"===H?$:ee,onCancel:ne,onError:te,setError:V,loading:Z})]})]}),Object(s.jsx)(h.a,{})]})}}}]);
//# sourceMappingURL=11.cb71dcc4.chunk.js.map
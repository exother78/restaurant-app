{"version":3,"sources":["Components/DevAdmin/Reports/Reports.jsx"],"names":["Reports","token","useStateValue","useState","error","setError","array","setArray","showContent","setShowContent","generatePDF","a","jsPDF","html","document","querySelector","callback","pdf","save","getReport","e","month","target","value","console","log","axios","get","headers","Authorization","report","data","response","setTimeout","className","onClick","type","id","onChange","style","visibility","margin","map","item","i","textTransform","name","lastName","email","total","colSpan","textAlign","paddingRight","fontSize","reduce","amount"],"mappings":"0NAsHeA,UA/GC,WACd,IAAQC,EAAUC,cAAVD,MAER,EAA0BE,mBAAS,MAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAA0BF,mBAAS,IAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAAsCJ,oBAAS,GAA/C,mBAAOK,EAAP,KAAoBC,EAApB,KACMC,EAAW,uCAAG,sBAAAC,EAAA,sDACR,IAAIC,IAAM,IAAK,KAAM,MAE3BC,KAAKC,SAASC,cAAc,YAAa,CAC3CC,SAAU,SAAUC,GAClBA,EAAIC,KAAK,gBALK,2CAAH,qDAWXC,EAAS,uCAAG,WAAOC,GAAP,iBAAAT,EAAA,6DACVU,EAAQD,EAAEE,OAAOC,MADP,SAGdC,QAAQC,IAAI,UAAWJ,GAHT,SAIOK,IAAMC,IAAN,iCAAoCN,GAAS,CAChEO,QAAS,CACPC,cAAc,UAAD,OAAY5B,EAAM,OANrB,cAIR6B,EAJQ,OASdvB,EAASuB,EAAOC,KAAKzB,OACrBG,GAAe,GAVD,kBAWPqB,GAXO,kCAadzB,EAAS,KAAM2B,SAASD,KAAK3B,OAbf,0DAAH,sDAuBf,OANIA,GACF6B,YAAW,WACT5B,EAAS,QACR,KAIH,sBAAK6B,UAAU,qBAAf,UACG9B,GAAS,qBAAK8B,UAAU,aAAf,SAA6B9B,IAEvC,sBAAK8B,UAAU,6BAAf,UACE,wBAAQC,QAASzB,EAAa0B,KAAK,UAAnC,0BAGA,uBACA,yBAAQC,GAAG,kBAAkBC,SAAU,SAAClB,GAAD,OAAOD,EAAUC,IAAxD,UACE,wBAAQG,MAAM,IAAd,qCACA,wBAAQA,MAAM,IAAd,qBACA,wBAAQA,MAAM,IAAd,sBACA,wBAAQA,MAAM,IAAd,mBACA,wBAAQA,MAAM,IAAd,mBACA,wBAAQA,MAAM,IAAd,iBACA,wBAAQA,MAAM,IAAd,kBACA,wBAAQA,MAAM,IAAd,kBACA,wBAAQA,MAAM,IAAd,oBACA,wBAAQA,MAAM,IAAd,uBACA,wBAAQA,MAAM,KAAd,qBACA,wBAAQA,MAAM,KAAd,sBACA,wBAAQA,MAAM,KAAd,4BAMJ,qBACEc,GAAG,UACHE,MAAO,CAAEC,WAAYhC,EAAc,UAAY,SAAUiC,OAAQ,aAFnE,SAGE,kCACE,gCACE,+BACE,sCACA,uCACA,6CAGJ,kCACGnC,EAAMoC,KAAI,SAACC,EAAMC,GAAP,OACT,+BACE,oBAAIL,MAAO,CAAEM,cAAe,cAA5B,SACGF,EAAKG,KAAO,IAAMH,EAAKI,WAE1B,sCAAKJ,QAAL,IAAKA,OAAL,EAAKA,EAAMK,MAAX,OACA,oCAAKL,QAAL,IAAKA,OAAL,EAAKA,EAAMM,UALJL,MAQX,+BACE,uCACA,oBACEM,QAAS,EACTX,MAAO,CACLY,UAAW,QACXC,aAAc,OACdC,SAAU,UALd,gBAOG/C,QAPH,IAOGA,OAPH,EAOGA,EAAOgD,QACN,SAACC,EAAQZ,GAAT,OAAkBA,EAAKM,MAAQM,IAC/B","file":"static/js/28.4a45fea5.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport jsPDF from \"jspdf\";\r\nimport axios from \"axios\";\r\nimport \"./Reports.css\";\r\nimport { useStateValue } from \"../../../StateProvider\";\r\n\r\n\r\nconst Reports = () => {\r\n  const { token } = useStateValue();\r\n\r\n  const [error, setError] = useState(null);\r\n  const [array, setArray] = useState([]);\r\n  const [showContent, setShowContent] = useState(false);\r\n  const generatePDF = async () => {\r\n    var doc = new jsPDF(\"p\", \"pt\", \"a4\");\r\n\r\n    doc.html(document.querySelector(\"#content\"), {\r\n      callback: function (pdf) {\r\n        pdf.save(\"mypdf.pdf\");\r\n      },\r\n    });\r\n  };\r\n\r\n\r\n  const getReport = async (e) => {\r\n    const month = e.target.value\r\n    try {\r\n      console.log('month: ', month)\r\n      const report = await axios.get(`/api/dashboard/reports/${month}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token[0]}`,\r\n        },\r\n      });\r\n      setArray(report.data.array);\r\n      setShowContent(true);\r\n      return report;\r\n    } catch (error) {\r\n      setError(error.response.data.error);\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    setTimeout(() => {\r\n      setError(null);\r\n    }, 2000);\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard__reports\">\r\n      {error && <div className=\"error__box\">{error}</div>}\r\n\r\n      <div className=\"dashboard__reports-buttons\">\r\n        <button onClick={generatePDF} type=\"primary\">\r\n          Generate Pdf\r\n        </button>\r\n        <br />\r\n        <select id=\"reports__months\" onChange={(e) => getReport(e)}>\r\n          <option value=\"0\">Select Month for Report</option>\r\n          <option value=\"1\">January</option>\r\n          <option value=\"2\">February</option>\r\n          <option value=\"3\">March</option>\r\n          <option value=\"4\">April</option>\r\n          <option value=\"5\">May</option>\r\n          <option value=\"6\">June</option>\r\n          <option value=\"7\">July</option>\r\n          <option value=\"8\">August</option>\r\n          <option value=\"9\">September</option>\r\n          <option value=\"10\">October</option>\r\n          <option value=\"11\">November</option>\r\n          <option value=\"12\">December</option>\r\n\r\n        </select>\r\n\r\n      </div>\r\n\r\n      <div\r\n        id=\"content\"\r\n        style={{ visibility: showContent ? \"visible\" : \"hidden\", margin: '20px auto' }}>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>name</th>\r\n              <th>email</th>\r\n              <th>amount</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {array.map((item, i) => (\r\n              <tr key={i}>\r\n                <td style={{ textTransform: \"capitalize\" }}>\r\n                  {item.name + \" \" + item.lastName}\r\n                </td>\r\n                <td>{item?.email} </td>\r\n                <td>{item?.total}</td>\r\n              </tr>\r\n            ))}\r\n            <tr>\r\n              <td>Total</td>\r\n              <td\r\n                colSpan={2}\r\n                style={{\r\n                  textAlign: \"right\",\r\n                  paddingRight: \"60px\",\r\n                  fontSize: \"larger\",\r\n                }}>\r\n                {array?.reduce(\r\n                  (amount, item) => item.total + amount,\r\n                  0\r\n                )}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reports;\r\n"],"sourceRoot":""}
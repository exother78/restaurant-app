(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[8],{122:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var r=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price*t.quantity+e}),0)}},141:function(e,t,c){"use strict";var r=c(24),a=c(115),n=c(3),s=(c(1),c(142),c(20)),o=c(0);t.a=function(e){var t=e.id,c=e.title,i=e.description,l=e.price,u=e.image,d=(e.removeID,e.quantity),j=Object(s.b)(),b=Object(n.a)(j.basket,2),h=b[0],p=b[1];return Object(o.jsx)("div",{className:"cart__product",children:Object(o.jsxs)("div",{className:"cart__product-container",children:[Object(o.jsx)("div",{className:"cart__product-image-container",children:Object(o.jsx)("img",{src:u,alt:"",className:"cart__product-image"})}),Object(o.jsxs)("div",{className:"cart__product-text-section",children:[Object(o.jsx)("h3",{className:"cart__product-title",children:c}),Object(o.jsx)("p",{className:"cartProduct__description",children:i.substring(0,60)}),Object(o.jsxs)("p",{className:"cart__product-price",children:["\u20ac ",l]})]}),Object(o.jsxs)("div",{className:"cart__product-price-incre",children:[Object(o.jsx)("button",{type:"button",className:"cartProduct__minus cartProduct__same",onClick:function(){var e=h.findIndex((function(e){return e.id===t}));if(-1!==e){if(h[e].quantity>1){var c=Object(a.a)(h);c[e]=Object(r.a)(Object(r.a)({},c[e]),{},{quantity:c[e].quantity-1}),p(c)}if(1===h[e].quantity){var n=Object(a.a)(h);n.splice(e,1),p(n)}}},children:"-"}),Object(o.jsx)("span",{className:"cartProduct__quantity cartProduct__same",children:d}),Object(o.jsx)("button",{type:"button",className:"cartProduct__plus cartProduct__same",onClick:function(){var e=h.findIndex((function(e){return e.id===t}));if(-1!==e){var c=Object(a.a)(h);c[e]=Object(r.a)(Object(r.a)({},c[e]),{},{quantity:c[e].quantity+1}),p(c)}},children:"+"})]})]})})}},142:function(e,t,c){},211:function(e,t,c){},311:function(e,t,c){"use strict";c.r(t);var r=c(24),a=c(6),n=c.n(a),s=c(9),o=c(3),i=c(1),l=(c(211),c(20)),u=c(141),d=c(122),j=c(12),b=c.n(j),h=c(212),p=c(0),O=function(e){var t=e.onSuccess,c=e.onCancel,r=e.onError,a=e.total,n=e.loading;e.setError;return Object(p.jsx)(h.c,{deferLoading:n,options:{"client-id":"ATSNzle97H2HdLUL3GMnS5I8PuKouWyteOOCVNR-3UqTW5N_0tFs3ddtDitE1IfqAlRXI4hbaEo2yDT9","merchant-id":"92V8XPRZFHZRE",locale:"it_IT",intent:"capture",currency:"EUR"},children:Object(p.jsx)(h.b,{fundingSource:h.a.PAYPAL,onApprove:t,onError:r,onCancel:c,createOrder:function(e,t){if(console.log("data: ",e),0!==a)return t.order.create({purchase_units:[{amount:{value:a}}]})},style:{layout:"horizontal",label:"checkout",height:40}})})};t.default=function(){var e=Object(l.b)(),t=Object(l.b)(),c=t.userAPI,a=t.token,j=Object(o.a)(c.postalCode,2),h=j[0],m=j[1],f=c.email,_=c.lastName,v=c.name,x=c.userID,y=Object(o.a)(e.basket,2),g=y[0],N=y[1],k=Object(i.useState)(""),P=Object(o.a)(k,2),C=P[0],q=P[1],w=Object(i.useState)(""),E=Object(o.a)(w,2),I=E[0],D=E[1],S=Object(i.useState)(""),A=Object(o.a)(S,2),T=A[0],L=A[1],R=Object(i.useState)(!0),F=Object(o.a)(R,2),z=F[0],H=F[1],U=function(){var e=Object(s.a)(n.a.mark((function e(t){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Date.now(),e.prev=1,C||L("Please enter your address to continue order"),x||L("Please Login to continue"),h||L("Please Enter your postal code to continue"),!(x&&h&&C&&g.length>0)){e.next=8;break}return e.next=8,b.a.post("/api/user/createorder",{orders:{orderNumber:c+1983,userID:x,postalCode:h,address:C,street:I,basket:g,name:v,email:f,lastName:_,time:c}},{headers:{Authorization:"Bearer ".concat(a[0])}}).then((function(){N([]),window.location.href="/"}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),L(e.t0.response.data.error);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L("Transaction not successful");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("cancelled: ",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return T&&setTimeout((function(){L(null)}),2e3),Object(i.useEffect)((function(){x&&h&&C&&I&&0!==g.length||H(!0),x&&h&&C&&I&&g.length>0&&H(!1)}),[I,x,h,g,C,z]),Object(p.jsxs)("div",{className:"checkout",children:[T&&Object(p.jsx)("div",{className:"error__box",children:T}),Object(p.jsx)("form",{children:Object(p.jsxs)("div",{className:"checkout__categories",children:[Object(p.jsxs)("div",{className:"checkout__category",children:[Object(p.jsx)("div",{className:"checkout__category-title",children:Object(p.jsx)("h2",{children:"Delivery Address"})}),Object(p.jsxs)("div",{className:"checkout__category-details",children:[Object(p.jsxs)("div",{className:"checkout__form-group",children:[Object(p.jsx)("label",{htmlFor:"address",children:"Address"}),Object(p.jsx)("input",{type:"text",name:"address",required:!0,value:C||"",placeholder:"eg. Dusseldorf",onChange:function(e){return q(e.target.value)}})]}),Object(p.jsxs)("div",{className:"checkout__form-group",children:[Object(p.jsx)("label",{htmlFor:"street",children:"Enter Street No."}),Object(p.jsx)("input",{type:"text",name:"street",required:!0,value:I||"",placeholder:"eg. street no.6 house no.1",onChange:function(e){return D(e.target.value)}})]}),Object(p.jsxs)("div",{className:"checkout__form-group",children:[Object(p.jsx)("label",{htmlFor:"street",children:"Postal Code"}),Object(p.jsx)("input",{type:"text",name:"postalCode",required:!0,value:h||"",placeholder:"Postal Code",onChange:function(e){m(e.target.value),localStorage.setItem("pcl",e.target.value)}})]})]})]}),Object(p.jsxs)("div",{className:"checkout__category",children:[Object(p.jsx)("div",{className:"checkout__category-title",children:Object(p.jsx)("h2",{children:"Review Items and Delivery"})}),Object(p.jsx)("div",{className:"checkout__category-details",style:{flexWrap:"wrap"},children:null===g||void 0===g?void 0:g.map((function(e,t){return Object(i.createElement)(u.a,Object(r.a)(Object(r.a)({},e),{},{removeID:t,key:t}))}))})]}),Object(p.jsxs)("div",{className:"checkout__category",children:[Object(p.jsx)("div",{className:"checkout__category-title",children:Object(p.jsx)("h2",{children:"Payment Methods"})}),Object(p.jsx)("div",{className:"checkout__category-details",children:Object(p.jsx)("div",{className:"checkout__payment-section",style:{width:"60%"},children:Object(p.jsxs)("h2",{style:{marginTop:"20px"},children:["Total ",Object(p.jsx)("span",{style:{marginLeft:"20px"}})," ",Object(d.a)(g)," \u20ac"]})})})]}),Object(p.jsx)("button",{type:"submit",onClick:function(e){return e.preventDefault()},style:{border:"none"},children:Object(p.jsx)(O,{total:Object(d.a)(g),onSuccess:U,onCancel:J,onError:W,setError:L,loading:z})})]})})]})}}}]);
//# sourceMappingURL=8.c9bf553a.chunk.js.map
{"version":3,"sources":["Components/Screens/Auth/Register.jsx","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"names":["Register","userAPI","useStateValue","isLoggedIn","useState","firstName","lastName","email","images","password","confirmPassword","postalCode","address","building","city","registerForm","setRegisterForm","fileImage","setFileImage","imageUpload","setImageUpload","loading","setLoading","error","setError","handleSubmit","e","a","preventDefault","alert","upload","axios","post","headers","res","console","log","response","data","register","d","public_id","url","localStorage","setItem","window","location","href","then","err","handleInputChange","target","name","value","prevValues","setTimeout","className","onSubmit","style","letterSpacing","padding","userSelect","type","onChange","getFile","files","formData","FormData","append","reader","FileReader","readAsDataURL","onloadend","result","src","alt","onClick","placeholder","required","defaultValue","disabled","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty"],"mappings":"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","file":"static/js/21.316f2ad9.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./Register.css\";\r\n\r\nimport axios from \"axios\";\r\nimport Loading from \"../Global/Loading\";\r\nimport { useStateValue } from \"./../../../StateProvider\";\r\n\r\nconst Register = () => {\r\n  const { userAPI } = useStateValue();\r\n  const [isLoggedIn] = userAPI.isLoggedIn;\r\n  const [registerForm, setRegisterForm] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    images: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n    postalCode: \"\",\r\n    address: \"\",\r\n    building: \"\",\r\n    city: \"\",\r\n  });\r\n\r\n  const [fileImage, setFileImage] = useState(null);\r\n  const [imageUpload, setImageUpload] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleFileChange = (e) => {\r\n    const getFile = e.target.files[0];\r\n    if (!getFile) return alert(\"File Doesn't exist\");\r\n\r\n    let formData = new FormData();\r\n    formData.append(\"file\", getFile);\r\n    setImageUpload(formData);\r\n\r\n    const reader = new FileReader();\r\n\r\n    reader.readAsDataURL(getFile);\r\n    reader.onloadend = () => {\r\n      setFileImage(reader.result);\r\n    };\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    if (registerForm.password !== registerForm.confirmPassword) {\r\n      alert(\"Passwords doesn't match\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const upload = async () => {\r\n      try {\r\n        const res = await axios.post(\"/api/upload\", imageUpload, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        });\r\n\r\n        return res;\r\n      } catch (error) {\r\n        setLoading(false);\r\n        console.log(\"error occured\", error.response.data.error);\r\n        setError(error.response.data.error);\r\n      }\r\n    };\r\n\r\n    const register = async (d) => {\r\n      try {\r\n        if (d) {\r\n          await axios.post(\"/api/user/register\", {\r\n            ...registerForm,\r\n            images: { public_id: d.data.public_id, url: d.data.url },\r\n          });\r\n\r\n          setLoading(false);\r\n        }\r\n\r\n        if (!d) {\r\n          await axios.post(\"/api/user/register\", {\r\n            ...registerForm,\r\n          });\r\n          setLoading(false);\r\n        }\r\n\r\n        localStorage.setItem(\"login\", true);\r\n        window.location.href = \"/\";\r\n      } catch (err) {\r\n        setLoading(false);\r\n        setError(err.response.data.error);\r\n\r\n        console.log(\"register function error: \", err);\r\n      }\r\n    };\r\n\r\n    try {\r\n      if (fileImage) {\r\n        upload().then(register);\r\n      }\r\n      if (!fileImage) {\r\n        register();\r\n      }\r\n    } catch (err) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setRegisterForm((prevValues) => ({\r\n      ...prevValues,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const clearImage = () => {\r\n    setImageUpload(null);\r\n    setFileImage(null);\r\n  };\r\n\r\n  if (error) {\r\n    setTimeout(() => {\r\n      setError(null);\r\n    }, 2000);\r\n  }\r\n\r\n  if (loading) return <Loading />;\r\n  if (isLoggedIn) window.location.href = \"/\";\r\n\r\n  return (\r\n    <div className=\"register\">\r\n      {error && <div className=\"error__box\">{error}</div>}\r\n      <form className=\"form\" onSubmit={handleSubmit}>\r\n        <div className=\"register__form\">\r\n          <div className=\"register__img\">\r\n            <h3\r\n              style={{\r\n                letterSpacing: \"1.3px\",\r\n                padding: \"10px 20px\",\r\n                userSelect: \"none\",\r\n              }}>\r\n              Choose Profile\r\n            </h3>\r\n            {!fileImage && (\r\n              <input\r\n                type=\"file\"\r\n                className=\"register__img-input\"\r\n                onChange={handleFileChange}\r\n              />\r\n            )}\r\n            {fileImage && (\r\n              <img style={{ userSelect: \"none\" }} src={fileImage} alt=\"\" />\r\n            )}\r\n            {fileImage && (\r\n              <span className=\"register__form-clear-img\" onClick={clearImage}>\r\n                Clear Image\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"register__user\">\r\n            <h3 style={{ letterSpacing: \"1.3px\", userSelect: \"none\" }}>\r\n              Please Provide Your Info\r\n            </h3>\r\n\r\n            <div className=\"register__input-group\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"firstName\"\r\n                placeholder=\"First Name *\"\r\n                required\r\n                className=\"register__input\"\r\n                value={registerForm.firstName}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"register__input-group\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"lastName\"\r\n                placeholder=\"Last Name *\"\r\n                required\r\n                className=\"register__input\"\r\n                value={registerForm.lastName}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n            <div className=\"register__input-group\">\r\n              <input\r\n                type=\"email\"\r\n                name=\"email\"\r\n                placeholder=\"Email *\"\r\n                required\r\n                className=\"register__input\"\r\n                value={registerForm.email}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n            <div className=\"register__input-group\">\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Password *\"\r\n                required\r\n                className=\"register__input\"\r\n                value={registerForm.password}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n            <div className=\"register__input-group\">\r\n              <input\r\n                type=\"password\"\r\n                name=\"confirmPassword\"\r\n                placeholder=\"Confirm Password *\"\r\n                required\r\n                className=\"register__input\"\r\n                value={registerForm.confirmPassword}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"register__address\">\r\n            <h3 style={{ letterSpacing: \"1.3px\", userSelect: \"none\" }}>\r\n              Provide Address\r\n            </h3>\r\n\r\n            <div className=\"register__input-group\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"address\"\r\n                placeholder=\"Address\"\r\n                className=\"register__input\"\r\n                value={registerForm.address}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"register__input-group\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"building\"\r\n                placeholder=\"eg. building #01 floor 2, flat 34\"\r\n                className=\"register__input\"\r\n                value={registerForm.building}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"register__input-group\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"postalCode\"\r\n                placeholder=\"Postal Code\"\r\n                className=\"register__input\"\r\n                value={registerForm.postalCode}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"register__input-group\">\r\n              <select\r\n                defaultValue=\"City\"\r\n                name=\"city\"\r\n                className=\"register__input\"\r\n                onChange={handleInputChange}>\r\n                <option value=\"City\" disabled>\r\n                  Select City\r\n                </option>\r\n                <option value=\"Berlin\">Berlin</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"register__input-group\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"country\"\r\n                placeholder=\"Country\"\r\n                className=\"register__input\"\r\n                value=\"Germany\"\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <button className=\"register__submit-button\" type=\"submit\">\r\n          Submit\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}"],"sourceRoot":""}
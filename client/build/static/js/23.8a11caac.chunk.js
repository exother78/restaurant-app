(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[23],{220:function(e,t,r){},326:function(e,t,r){"use strict";r.r(t);var a=r(12),c=r(31),n=r(6),i=r.n(n),s=r(11),u=r(3),o=r(1),p=(r(220),r(13)),l=r.n(p),d=r(15),j=r(4),b=r(9),h=r(0);t.default=function(){var e=Object(b.f)(),t=Object(d.b)(),r=t.categoriesAPI,n=t.productsAPI,p=t.userAPI,f=t.token,O=Object(u.a)(p.isAdmin,1)[0],m=Object(u.a)(r.categories,1)[0],v=Object(u.a)(n.callback,2),x=v[0],_=v[1],g=Object(o.useState)(!1),y=Object(u.a)(g,2),w=y[0],N=y[1],k=Object(o.useState)(),C=Object(u.a)(k,2),S=C[0],A=C[1],P=Object(o.useState)(!1),D=Object(u.a)(P,2),q=D[0],F=D[1],I=Object(o.useState)(null),T=Object(u.a)(I,2),z=T[0],B=T[1],J=Object(o.useState)({product_id:"",title:"",description:"",price:"",category:"",images:""}),R=Object(u.a)(J,2),L=R[0],U=R[1],V=function(){var e=Object(s.a)(i.a.mark((function e(t){var r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.files[0]){e.next=3;break}return e.abrupt("return",alert("File Doesn't exist"));case 3:(a=new FormData).append("file",r),N(a),(c=new FileReader).onloadend=function(){A(c.result)},c.readAsDataURL(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){var t=e.target,r=t.name,n=t.value;U((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},r,n))}))},Y=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/upload",w,{headers:{"Content-Type":"multipart/form-data"}});case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),B(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var t=Object(s.a)(i.a.mark((function t(r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.post("/api/products",Object(c.a)(Object(c.a)({},L),{},{images:{public_id:r.data.public_id,url:r.data.url}}),{headers:{Authorization:"Bearer ".concat(f[0])}});case 3:return a=t.sent,_(!x),F(!1),e.push("/dashboard/products"),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(0),B(t.t0.response.data.error),F(!1),t.abrupt("return",t.t0.response.data);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),G=function(){var t=Object(s.a)(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.post("/api/products",Object(c.a)({},L),{headers:{Authorization:"Bearer ".concat(f[0])}});case 3:return r=t.sent,_(!x),F(!1),e.push("/dashboard/products"),t.abrupt("return",r);case 10:return t.prev=10,t.t0=t.catch(0),B(t.t0.response.data.error),F(!1),t.abrupt("return",t.t0.response.data);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),H=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&E(t),t||G();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),w&&(F(!0),Y().then(H)),w||H();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return O?(z&&setTimeout((function(){B(null)}),2e3),q?Object(h.jsx)(j.a,{}):Object(h.jsxs)("div",{className:"create__product",children:[z&&Object(h.jsx)("div",{className:"error__box",children:z}),Object(h.jsx)("h1",{style:{margin:"0 30px "},children:"Create Product"}),Object(h.jsxs)("form",{onSubmit:K,className:"create__product-form",children:[Object(h.jsxs)("div",{className:"create__product-container-leftSection",children:[!S&&Object(h.jsx)("input",{type:"file",name:"file",onChange:V,className:"create__product-leftSection-image-input"}),S&&Object(h.jsxs)("div",{className:"create__product-image-preview",children:[Object(h.jsx)("img",{src:S,alt:"",width:"100%",height:"100%",style:{objectFit:"cover"}}),Object(h.jsx)("div",{className:"create__product-cancel-image",onClick:function(){A(null),N(!1)},children:"X"})]})]}),Object(h.jsxs)("div",{className:"create__product-container-rightSection",children:[Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsx)("input",{required:!0,type:"text",placeholder:"Product Id",value:L.product_id,onChange:X,name:"product_id"})}),Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsx)("input",{required:!0,type:"text",name:"title",placeholder:"Title",value:L.title,onChange:X})}),Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsx)("input",{type:"text",placeholder:"Description",value:L.description,onChange:X,name:"description"})}),Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsx)("input",{required:!0,type:"text",placeholder:"Price",value:L.price,onChange:X,name:"price"})}),Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsxs)("select",{name:"category",onChange:X,defaultValue:"Category",required:!0,children:[Object(h.jsx)("option",{value:"Category",disabled:!0,children:"Select Category"}),m.map((function(e,t){return Object(h.jsx)("option",{value:e.name,children:e.name},t)}))]})}),Object(h.jsx)("button",{className:"create__product-form-button",children:"Submit"})]})]})]})):Object(h.jsx)("h1",{style:{margin:"15px",color:"red",letterSpacing:"2px"},children:"You don't have permission to visit this route"})}}}]);
//# sourceMappingURL=23.8a11caac.chunk.js.map
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[19],{142:function(e,t,r){"use strict";r.r(t);var c=r(21),a=r(6),n=r(4),i=r.n(n),s=r(7),u=r(3),o=r(1),p=r(9),l=r.n(p),d=r(18),j=r(8),b=r(10),h=r(0);t.default=function(){var e=Object(b.f)(),t=Object(d.b)(),r=t.categoriesAPI,n=t.productsAPI,p=t.userAPI,O=Object(u.a)(p.isAdmin,1)[0],m=Object(u.a)(r.categories,1)[0],f=Object(u.a)(n.callback,2),v=f[0],x=f[1],_=Object(o.useState)(!1),g=Object(u.a)(_,2),y=g[0],w=g[1],N=Object(o.useState)(),C=Object(u.a)(N,2),S=C[0],k=C[1],q=Object(o.useState)(!1),P=Object(u.a)(q,2),A=P[0],D=P[1],F=Object(o.useState)(null),I=Object(u.a)(F,2),J=I[0],R=I[1],T=Object(o.useState)({product_id:"",title:"",description:"",price:"",category:"",images:""}),L=Object(u.a)(T,2),U=L[0],V=L[1],X=function(){var e=Object(s.a)(i.a.mark((function e(t){var r,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.files[0]){e.next=3;break}return e.abrupt("return",alert("File Doesn't exist"));case 3:(c=new FormData).append("file",r),w(c),(a=new FileReader).onloadend=function(){k(a.result)},a.readAsDataURL(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){var t=e.target,r=t.name,n=t.value;V((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(c.a)({},r,n))}))},z=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/upload",y,{headers:{"Content-Type":"multipart/form-data"}});case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log("createProduct uploadimage: error: ",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(s.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/products",Object(a.a)(Object(a.a)({},U),{},{images:{public_id:t.data.public_id,url:t.data.url}}));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),R(e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var t=Object(s.a)(i.a.mark((function t(r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),D(!0),z().then(B).then((function(){x(!v),D(!1),e.push("/dashboard/products")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return O?A?Object(h.jsx)(j.a,{}):Object(h.jsxs)("div",{className:"create__product",children:[J&&Object(h.jsx)("div",{className:"error__box",children:J}),Object(h.jsx)("h1",{style:{margin:"0 30px "},children:"Create Product"}),Object(h.jsxs)("form",{onSubmit:E,className:"create__product-form",children:[Object(h.jsxs)("div",{className:"create__product-container-leftSection",children:[!S&&Object(h.jsx)("input",{required:!0,type:"file",name:"file",onChange:X,className:"create__product-leftSection-image-input"}),S&&Object(h.jsxs)("div",{className:"create__product-image-preview",children:[Object(h.jsx)("img",{required:!0,src:S,alt:"",width:"100%",height:"100%",style:{objectFit:"cover"}}),Object(h.jsx)("div",{className:"create__product-cancel-image",onClick:function(){k(null),w(!1)},children:"X"})]})]}),Object(h.jsxs)("div",{className:"create__product-container-rightSection",children:[Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsx)("input",{required:!0,type:"text",placeholder:"Product Id",value:U.product_id,onChange:Y,name:"product_id"})}),Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsx)("input",{required:!0,type:"text",name:"title",placeholder:"Title",value:U.title,onChange:Y})}),Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsx)("input",{required:!0,type:"text",placeholder:"Description",value:U.description,onChange:Y,name:"description"})}),Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsx)("input",{required:!0,type:"text",placeholder:"Price",value:U.price,onChange:Y,name:"price"})}),Object(h.jsx)("div",{className:"create__product-input",children:Object(h.jsxs)("select",{name:"category",onChange:Y,defaultValue:"Category",required:!0,children:[Object(h.jsx)("option",{value:"Category",disabled:!0,children:"Select Category"}),m.map((function(e,t){return Object(h.jsx)("option",{value:e.name,children:e.name},t)}))]})}),Object(h.jsx)("button",{className:"create__product-form-button",children:"Submit"})]})]})]}):Object(h.jsx)("h1",{style:{margin:"15px",color:"red",letterSpacing:"2px"},children:"You don't have permission to visit this route"})}}}]);
//# sourceMappingURL=19.ae409f96.chunk.js.map